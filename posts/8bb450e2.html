<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>入门网络编程 | BitHachi</title><meta name="description" content="1. 为什么要学习网络编程？我们初学一门语言时，大多数的时候都是与控制台或者本地主机打交道。如果我们想与其它计算机交流沟通，交换数据，那么我们就需要学习一些网络知识，学习一些网络编程的技术去达到这个目的。 简单一句话：网络编程可以让你与其它计算机进行交流沟通。 2. 复习一些重要的网络知识我在之前总结过计算机网络的重要基础知识，忘记的同志可以去看看：计算机网络知识总结目录，这里只简述一些在这里用到"><meta name="keywords" content="网络编程"><meta name="author" content="BitHachi"><meta name="copyright" content="BitHachi"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.bithachi.cn/posts/8bb450e2.html"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//ta.qq.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta name="baidu-site-verification" content="3VJlgEduPjcVcUAR"/><meta property="og:type" content="article"><meta property="og:title" content="入门网络编程"><meta property="og:url" content="https://www.bithachi.cn/posts/8bb450e2.html"><meta property="og:site_name" content="BitHachi"><meta property="og:description" content="1. 为什么要学习网络编程？我们初学一门语言时，大多数的时候都是与控制台或者本地主机打交道。如果我们想与其它计算机交流沟通，交换数据，那么我们就需要学习一些网络知识，学习一些网络编程的技术去达到这个目的。 简单一句话：网络编程可以让你与其它计算机进行交流沟通。 2. 复习一些重要的网络知识我在之前总结过计算机网络的重要基础知识，忘记的同志可以去看看：计算机网络知识总结目录，这里只简述一些在这里用到"><meta property="og:image" content="https://cdn.pixabay.com/photo/2017/02/20/18/03/cat-2083492__340.jpg"><meta property="article:published_time" content="2020-08-26T13:59:45.000Z"><meta property="article:modified_time" content="2020-08-27T05:23:50.623Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = '2'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="next" title="泛型的奥妙" href="https://www.bithachi.cn/posts/dd50572c.html"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8f5f31c25712dd1fb6414ae53fd6ecaf";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-171838759-1', 'auto');
ga('send', 'pageview');
</script><script src="https://tajs.qq.com/stats?sId=66572961" charset="UTF-8"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: BitHachi","link":"链接: ","source":"来源: BitHachi","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-center"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="baidu-site-verification" content="V1TxT1VCnF" /><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/bithachi.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">27</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">55</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">5</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-book"></i><span> 文章</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/books"><i class="fa-fw fa fa-bookmark"></i><span> 阅读</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/MessageBoard/"><i class="fa-fw fa fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-为什么要学习网络编程？"><span class="toc-text">1. 为什么要学习网络编程？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-复习一些重要的网络知识"><span class="toc-text">2. 复习一些重要的网络知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-网络通信协议"><span class="toc-text">2.1 网络通信协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-TCP-IP"><span class="toc-text">2.1.1 TCP&#x2F;IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-TCP-和-UDP"><span class="toc-text">2.1.2 TCP 和 UDP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-IP"><span class="toc-text">2.2 IP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-端口"><span class="toc-text">2.3 端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-Socket"><span class="toc-text">2.4 Socket</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-InetAddress类"><span class="toc-text">3. InetAddress类</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-基于Socket-的TCP网络编程"><span class="toc-text">4.  基于Socket 的TCP网络编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-客户端—Client"><span class="toc-text">4.1 客户端—Client</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-服务端—Server"><span class="toc-text">4.2 服务端—Server</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-一个文件传输的例子"><span class="toc-text">4.3 一个文件传输的例子</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-UDP网络编程"><span class="toc-text">5. UDP网络编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-DatagramSocket-与-DatagramPacket"><span class="toc-text">5.1 DatagramSocket 与 DatagramPacket</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-DatagramSocket-类的常用方法"><span class="toc-text">5.2 DatagramSocket 类的常用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-DatagramPacket-类的常用方法"><span class="toc-text">5.3 DatagramPacket 类的常用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-UDP网络通信流程"><span class="toc-text">5.4 UDP网络通信流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-一个例子"><span class="toc-text">5.5 一个例子</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-URL编程"><span class="toc-text">6. URL编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-URL类"><span class="toc-text">6.1 URL类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-URL类构造器"><span class="toc-text">6.2 URL类构造器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-针对HTTP-协议的URLConnection类"><span class="toc-text">6.2 针对HTTP 协议的URLConnection类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-URI-、URL-和URN的区别"><span class="toc-text">6.3 URI 、URL 和URN的区别</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-小结"><span class="toc-text">7. 小结</span></a></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.pixabay.com/photo/2017/02/20/18/03/cat-2083492__340.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">BitHachi</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-book"></i><span> 文章</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/books"><i class="fa-fw fa fa-bookmark"></i><span> 阅读</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/MessageBoard/"><i class="fa-fw fa fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">入门网络编程</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-08-26 21:59:45 21:59:45"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-08-26 21:59:45</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-08-27 13:23:50 13:23:50"><i class="fas fa-history fa-fw"></i> 更新于 2020-08-27 13:23:50</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right post-meta__separator"></i><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/Java/JavaSE/">JavaSE</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">6.6k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 24 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="far fa-comments fa-fw post-meta__icon"></i><span>评论数:</span><a href="/posts/8bb450e2.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/posts/8bb450e2.html" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="1-为什么要学习网络编程？"><a href="#1-为什么要学习网络编程？" class="headerlink" title="1. 为什么要学习网络编程？"></a>1. 为什么要学习网络编程？</h1><p>我们初学一门语言时，大多数的时候都是与控制台或者本地主机打交道。如果我们想与其它计算机交流沟通，交换数据，那么我们就需要学习一些网络知识，学习一些网络编程的技术去达到这个目的。</p>
<p>简单一句话：网络编程可以让你与其它计算机进行交流沟通。</p>
<h1 id="2-复习一些重要的网络知识"><a href="#2-复习一些重要的网络知识" class="headerlink" title="2. 复习一些重要的网络知识"></a>2. 复习一些重要的网络知识</h1><p>我在之前总结过计算机网络的重要基础知识，忘记的同志可以去看看：<a href="https://blog.csdn.net/weixin_43914604/article/details/104722679" target="_blank" rel="noopener">计算机网络知识总结目录</a>，这里只简述一些在这里用到的知识点。</p>
<h2 id="2-1-网络通信协议"><a href="#2-1-网络通信协议" class="headerlink" title="2.1 网络通信协议"></a>2.1 网络通信协议</h2><p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20200826221619.png" alt="image-20200826221618034"></p>
<h3 id="2-1-1-TCP-IP"><a href="#2-1-1-TCP-IP" class="headerlink" title="2.1.1 TCP/IP"></a>2.1.1 TCP/IP</h3><ul>
<li>传输层协议中有两个非常重要的协议：<br>传输控制协议TCP(Transmission Control Protocol)<br>用户数据报协议UDP(User Datagram Protocol)。</li>
<li>TCP/IP 以其两个主要协议：传输控制协议(TCP) 和网络互联协议(IP)而得名，实际上是一组协议，包括多个具有不同功能且互为关联的协议。</li>
<li>IP(Internet Protocol)协议是网络层的主要协议，支持网间互连的数据通信。</li>
</ul>
<h3 id="2-1-2-TCP-和-UDP"><a href="#2-1-2-TCP-和-UDP" class="headerlink" title="2.1.2 TCP 和 UDP"></a>2.1.2 TCP 和 UDP</h3><ul>
<li><p>TCP 协议：</p>
<ul>
<li><p>使用TCP协议前，须先建立TCP连 接，形成传输数据通道</p>
</li>
<li><p>传输前，采用“ 三次握手”方式，点对点通信，是可靠的</p>
</li>
<li><p>TCP协议进行通信的两个应用进程：客户端、服务端。</p>
</li>
<li><p>在连接中可进行大数据量的传输</p>
</li>
<li><p>传输完毕，需释放已建立的连接，效率低</p>
</li>
</ul>
</li>
<li><p>UDP 协议：</p>
<ul>
<li>将数据、源、目的封装成数据包，不需要建立连接</li>
<li>每个数据报的大小限制在64K内</li>
<li>发送不管对方是否准备好，接收方收到也不确认，故是不可靠的</li>
<li>可以广播发送<br> 发送数据结束时无需释放资源，开销小，速度快</li>
</ul>
</li>
</ul>
<h2 id="2-2-IP"><a href="#2-2-IP" class="headerlink" title="2.2 IP"></a>2.2 IP</h2><ul>
<li>IP 地址：InetAddress</li>
<li><code>唯一的标识 Internet 上的一台计算机</code></li>
<li>本地回环地址(hostAddress)：127.0.0.1 ，主机名(hostName)：localhost</li>
<li>IP地址分类方式1：<code>IPV4 和 IPV6</code><ul>
<li>IPV4：4个字节组成，4个0-255。大概42亿，30亿都在北美，亚洲4亿。2011年初已经用尽。以点分十进制表示，如192.168.0.1</li>
<li>IPV6：128位（16个字节），写成8个无符号整数，每个整数用四个十六进制位表示，数之间用冒号（：）分开，如：3ffe:3201:1401:1280:c8ff:fe4d:db39:1984</li>
</ul>
</li>
<li>IP地址分类方式2： <code>公网地址( 万维网使用)和 私有地址( 局域网使用)</code>。192.168.开头的就是私有址址，范围即为192.168.0.0–192.168.255.255，专门为组织机构内部使用</li>
<li>特点：不易记忆</li>
</ul>
<h2 id="2-3-端口"><a href="#2-3-端口" class="headerlink" title="2.3 端口"></a>2.3 端口</h2><ul>
<li><p><code>端口号标识正在计算机上运行的进程（程序）</code></p>
</li>
<li><p>不同的进程有不同的端口号</p>
</li>
<li><p>被规定为一个 16 位的整数 0~65535。</p>
</li>
<li><p>端口分类：</p>
<ul>
<li><p><code>公认端口</code>：0~1023。被预先定义的服务通信占用（如：HTTP占用端口80，FTP占用端口21，Telnet占用端口23）</p>
</li>
<li><p><code>注册端口</code>：1024~49151。分配给用户进程或应用程序。（如：Tomcat占用端口8080，MySQL占用端口3306，Oracle占用端口1521等）。</p>
</li>
<li><p><code>动态/ 私有端口</code>：49152~65535。</p>
</li>
</ul>
</li>
<li><p>端口号与IP 地址的组合得出一个网络套接字：<code>Socket</code>,标识某台计算机上的某一进程。</p>
</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20200826222340.png" alt="image-20200826222340691"></p>
<h2 id="2-4-Socket"><a href="#2-4-Socket" class="headerlink" title="2.4 Socket"></a>2.4 Socket</h2><ul>
<li>网络上具有唯一标识的<code>IP地址和端口号组合</code>在一起才能构成唯一能识别的标识符套接字。</li>
<li>通信的两端都要有Socket，是两台机器间通信的端点。</li>
<li>网络通信其实就是Socket间的通信。</li>
<li>Socket允许程序把网络连接当成一个流，数据在两个Socket间通过IO传输。</li>
<li>一般主动发起通信的应用程序属<code>客户端</code>，等待通信请求的为<code>服务端</code>。</li>
<li>Socket分类：<br><code>流套接字</code>（stream socket）：使用<code>TCP</code>提供可依赖的字节流服务<br><code>数据报套接字</code>（datagram socket）：使用<code>UDP</code>提供“尽力而为”的数据报服务</li>
</ul>
<p><strong>Java中提供了Socket类：</strong></p>
<ul>
<li><p>Socket 类的常用构造 器 ：</p>
<ol>
<li>public Socket(InetAddress address,int port)创建一个流套接字并将其连接到指定IP 地址的指定端口号。</li>
<li>public Socket(String host,int port)创建一个流套接字并将其连接到指定主机上的指定端口号。</li>
</ol>
</li>
<li><p>Socket 类的常用方法：</p>
<ol>
<li><p>public InputStream getInputStream()返回此套接字的输入流。可以用于接收网络消息</p>
</li>
<li><p>public OutputStream getOutputStream()返回此套接字的输出流。可以用于发送网络消息</p>
</li>
<li><p>public InetAddress getInetAddress()此套接字连接到的远程 IP 地址；如果套接字是未连接的，则返回 null。</p>
</li>
<li><p>public InetAddress getLocalAddress()获取套接字绑定的本地地址。 即本端的IP地址</p>
</li>
<li><p>public int getPort()此套接字连接到的远程端口号；如果尚未连接套接字，则返回0。</p>
</li>
<li><p>public int getLocalPort()返回此套接字绑定到的本地端口。 如果尚未绑定套接字，则返回 -1。即本端的端口号。</p>
</li>
<li><p>public void close()关闭此套接字。套接字被关闭后，便不可在以后的网络连接中使用（即无法重新连接或重新绑定）。需要创建新的套接字对象。 关闭此套接字也将会关闭该套接字的 InputStream 和OutputStream。</p>
</li>
<li><p>public void shutdownInput()如果在套接字上调用 shutdownInput() 后从套接字输入流读取内容，则流将返回 EOF（文件结束符）。即不能在从此套接字的输入流中接收任何数据。</p>
</li>
<li><p>public void shutdownOutput()禁用此套接字的输出流。对于 TCP 套接字，任何以前写入的数据都将被发送，并且后跟 TCP 的正常连接终止序列。 如果在套接字上调用 shutdownOutput() 后写入套接字输出流，则该流将抛出 IOException。 即不能通过此套接字的输出流发送任何数据。</p>
</li>
</ol>
</li>
</ul>
<h1 id="3-InetAddress类"><a href="#3-InetAddress类" class="headerlink" title="3. InetAddress类"></a>3. InetAddress类</h1><p><strong>InetAddress类是Java中用于标识IP地址的类</strong></p>
<ul>
<li><p>Internet上的主机有两种方式表示地址：</p>
<ol>
<li><p>域名(hostName)：<a href="www.bithachi.cn">www.bithachi.cn</a> </p>
</li>
<li><p>IP 地址(hostAddress)：150.108.35.210</p>
</li>
</ol>
</li>
<li><p>InetAddress类主要表示IP地址，两个子类：Inet4Address、Inet6Address。</p>
</li>
<li><p>InetAddress 类对象含有一个 Internet 主机地址的域名和IP地址：<a href="www.bithachi.cn">www.bithachi.cn</a> 和 150.108.35.210。</p>
</li>
<li><p>域名容易记忆，当在连接网络时输入一个主机的域名后，域名服务器(DNS) 负责将域名转化成IP地址，这样才能和主机建立连接。 ——-<code>域名解析</code></p>
</li>
<li><p>先找本机hosts文件，是否有输入的域名地址，没有的话，再通过DNS服务器，找主机。</p>
</li>
</ul>
<p><strong>InetAddress类的构造器和方法：</strong></p>
<ul>
<li>InetAddress 类没有提供公共的构造器，而是提供 了 如下几个 静态方法来获取InetAddress 实例<br>public static InetAddress getLocalHost()<br>public static InetAddress getByName(String host)</li>
<li>InetAddress 提供了如下几个常用 的 方法<br>public String getHostAddress() ：返回 IP 地址字符串（以文本表现形式）。<br>public String getHostName() ：获取此 IP 地址的主机名<br>public boolean isReachable(int timeout)： ：测试是否可以达到该地址</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InetAddressTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InetAddress inet1 = InetAddress.getByName(<span class="string">"192.168.10.14"</span>);</span><br><span class="line">            System.out.println(inet1);</span><br><span class="line"></span><br><span class="line">            InetAddress inet2 = InetAddress.getByName(<span class="string">"www.bithachi.cn"</span>);</span><br><span class="line">            System.out.println(inet2);</span><br><span class="line"></span><br><span class="line">            InetAddress inet3 = InetAddress.getByName(<span class="string">"127.0.0.1"</span>);</span><br><span class="line">            System.out.println(inet3);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//获取本地ip</span></span><br><span class="line">            InetAddress inet4 = InetAddress.getLocalHost();</span><br><span class="line">            System.out.println(inet4);</span><br><span class="line"></span><br><span class="line">            inet2 = InetAddress.getByName(<span class="string">"www.bithachi.cn"</span>);</span><br><span class="line">            <span class="comment">//getHostName()</span></span><br><span class="line">            System.out.println(inet2.getHostName());</span><br><span class="line">            <span class="comment">//getHostAddress()</span></span><br><span class="line">            System.out.println(inet2.getHostAddress());</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/<span class="number">192</span>.<span class="number">168</span>.<span class="number">10</span>.<span class="number">14</span></span><br><span class="line">www.bithachi.cn/<span class="number">150</span>.<span class="number">109</span>.<span class="number">4</span>.<span class="number">162</span></span><br><span class="line">/<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">BitHachi/<span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">3</span></span><br><span class="line">www.bithachi.cn</span><br><span class="line"><span class="number">150</span>.<span class="number">109</span>.<span class="number">4</span>.<span class="number">162</span></span><br></pre></td></tr></table></figure>

<h1 id="4-基于Socket-的TCP网络编程"><a href="#4-基于Socket-的TCP网络编程" class="headerlink" title="4.  基于Socket 的TCP网络编程"></a>4.  基于Socket 的TCP网络编程</h1><p> Java语言的基于套接字编程分为服务端编程和客户端编程，其通信模型如图所示：</p>
<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20200826234826.png" alt="image-20200826234826836"></p>
<h2 id="4-1-客户端—Client"><a href="#4-1-客户端—Client" class="headerlink" title="4.1 客户端—Client"></a>4.1 客户端—Client</h2><ul>
<li>客户端Socket 的工作过程包含以下四个基本的步骤 ：<ol>
<li>创建 Socket ：根据指定服务端的 IP 地址或端口号构造 Socket 类对象。若服务器端响应，则建立客户端到服务器的通信线路。若连接失败，会出现异常。</li>
<li>打开连接到 Socket 的输入/ 出流： 使用 getInputStream()方法获得输入流，使用getOutputStream()方法获得输出流，进行数据传输</li>
<li>按照一定的协议对 Socket 进行读/ 写操作：通过输入流读取服务器放入线路的信息（但不能读取自己放入线路的信息），通过输出流将信息写入线程。</li>
<li>关闭 Socket： ：断开客户端到服务器的连接，释放线路</li>
</ol>
</li>
<li>客户端程序可以使用Socket类创建对象， 创建的同时会自动向服务器方发起连接。</li>
</ul>
<p><strong>Socket的构造器是：</strong></p>
<ul>
<li>Socket(String host,int port)throws UnknownHostException,IOException：向服务器(域名是host。端口号为port)发起TCP连接，若成功，则创建Socket对象，否则抛出异常。</li>
<li>Socket(InetAddress address,int port)throws IOException：根据InetAddress对象所表示的IP地址以及端口号port发起连接。</li>
</ul>
<h2 id="4-2-服务端—Server"><a href="#4-2-服务端—Server" class="headerlink" title="4.2 服务端—Server"></a>4.2 服务端—Server</h2><ul>
<li>服务器 程序的工作过程包含以下四个基本的步骤：<ol>
<li>调用 ServerSocket(int port) ： ：创建一个服务器端套接字，并绑定到指定端口 上。用于监听客户端的请求。</li>
<li>调用 accept()： ：监听连接请求，如果客户端请求连接，则接受连接，返回通信套接字对象。</li>
<li>调用该Socket 类对象的 getOutputStream() 和 和 getInputStream ()： ：获取输出流和输入流，开始网络数据的发送和接收。</li>
<li>关闭ServerSocket 和Socket 对象：客户端访问结束，关闭通信套接字。</li>
</ol>
</li>
<li>ServerSocket 对象负责等待客户端请求建立套接字连接，类似邮局某个窗口中的业务员。也就是说，<code>服务器必须事先建立一个等待客户请求建立套接字的 连接的ServerSocket 对象。</code></li>
<li>所谓“接收”客户的套接字请求，就是accept()方法会返回一个 Socket 对象</li>
</ul>
<h2 id="4-3-一个文件传输的例子"><a href="#4-3-一个文件传输的例子" class="headerlink" title="4.3 一个文件传输的例子"></a>4.3 一个文件传输的例子</h2><p><strong>这里举一个例子，在本地有一个服务端和一个客户端，客户端向服务端发送一个文件，服务端保存文件，并对客户端进行信息反馈。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实现TCP的网络编程，需先启动服务端再启动客户端</span></span><br><span class="line"><span class="comment"> * 从客户端发送文件给服务端，服务端保存到本地。并返回“发送成功”给客户端。</span></span><br><span class="line"><span class="comment"> * 并关闭相应的连接。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPTest3</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">client</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Socket socket = <span class="keyword">null</span>;</span><br><span class="line">        OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.创建Socket对象，指定IP和端口</span></span><br><span class="line">            socket = <span class="keyword">new</span> Socket(InetAddress.getByName(<span class="string">"127.0.0.1"</span>), <span class="number">9090</span>);</span><br><span class="line">            <span class="comment">//2.获取一个输出流，用于发送数据给服务端</span></span><br><span class="line">            os = socket.getOutputStream();</span><br><span class="line">            <span class="comment">//3.选择一个文件发送给服务端，比如hello.txt</span></span><br><span class="line">            fis = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">"hello.txt"</span>));<span class="comment">//这里填写你文件的路径</span></span><br><span class="line">            <span class="comment">//4.将hello.txt以字节方式发送给服务端</span></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = fis.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                os.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//5.关闭数据的输出/发送,不关闭则服务端那边一直read堵塞</span></span><br><span class="line">            socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//6.接收来自于服务器端的数据，并显示到控制台上</span></span><br><span class="line">            is = socket.getInputStream();</span><br><span class="line">            baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            <span class="keyword">byte</span>[] bufferr = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">20</span>];</span><br><span class="line">            <span class="keyword">int</span> len1;</span><br><span class="line">            <span class="keyword">while</span> ((len1 = is.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                baos.write(buffer, <span class="number">0</span>, len1);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(baos.toString());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//6.资源的关闭</span></span><br><span class="line">            <span class="keyword">if</span> (fis != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fis.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (is != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (os != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    os.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (socket != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (baos != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    baos.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">server</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ServerSocket ss = <span class="keyword">null</span>;</span><br><span class="line">        Socket socket = <span class="keyword">null</span>;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.创建服务端套接字，并绑定到监听的端口上</span></span><br><span class="line">            ss = <span class="keyword">new</span> ServerSocket(<span class="number">9090</span>);</span><br><span class="line">            <span class="comment">//2.监听连接请求，如果客户端请求连接，则接受连接，返回通信套接字对象</span></span><br><span class="line">            socket = ss.accept();</span><br><span class="line">            <span class="comment">//3.获取输入流，接收客服端发来的数据</span></span><br><span class="line">            is = socket.getInputStream();</span><br><span class="line">            <span class="comment">//4.将客户端发来的文件内容输出到hello3.txt</span></span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(<span class="string">"hello3.txt"</span>));<span class="comment">//这里填写你文件的路径</span></span><br><span class="line">            <span class="comment">//5.将客户端发来的文件进行存储，写入指定的hello3.txt文件中</span></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = is.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                fos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"已接收到客户端发来的数据文件，文件传输完成"</span>);</span><br><span class="line">            <span class="comment">//6.服务器端给予客户端反馈</span></span><br><span class="line">            os = socket.getOutputStream();</span><br><span class="line">            os.write(<span class="string">"你好客户端，txt文件已收到！"</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//7.资源的关闭</span></span><br><span class="line">            <span class="keyword">if</span> (fos != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fos.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (is != <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (os != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    os.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (socket != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (ss != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    ss.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>服务端正确存储了客户端发来的文件，并有以下信息的交互：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//客户端：</span><br><span class="line">你好客户端，txt文件已收到！</span><br><span class="line"></span><br><span class="line">//服务端：</span><br><span class="line">已接收到客户端发来的数据文件，文件传输完成</span><br></pre></td></tr></table></figure>

<h1 id="5-UDP网络编程"><a href="#5-UDP网络编程" class="headerlink" title="5. UDP网络编程"></a>5. UDP网络编程</h1><h2 id="5-1-DatagramSocket-与-DatagramPacket"><a href="#5-1-DatagramSocket-与-DatagramPacket" class="headerlink" title="5.1 DatagramSocket 与 DatagramPacket"></a>5.1 DatagramSocket 与 DatagramPacket</h2><ul>
<li>类<code>DatagramSocket</code>和<code>DatagramPacket</code>实现了基于 UDP 协议网络程序。</li>
<li>UDP数据报通过<code>数据报套接字 DatagramSocket</code>发送和接收，系统不保证UDP数据报一定能够安全送到目的地，也不能确定什么时候可以抵达。</li>
<li><code>DatagramPacket 对象封装了UDP数据报，在数据报中包含了发送端的IP地址和端口号以及接收端的IP地址和端口号。</code></li>
<li>UDP协议中每个数据报都给出了完整的地址信息，因此无须建立发送方和接收方的连接。如同发快递包裹一样。</li>
</ul>
<h2 id="5-2-DatagramSocket-类的常用方法"><a href="#5-2-DatagramSocket-类的常用方法" class="headerlink" title="5.2 DatagramSocket 类的常用方法"></a>5.2 DatagramSocket 类的常用方法</h2><ol>
<li>public DatagramSocket(int port)创建数据报套接字并将其绑定到本地主机上的指定端口。套接字将被绑定到通配符地址，IP 地址由内核来选择。</li>
<li>public DatagramSocket(int port,InetAddress laddr)创建数据报套接字，将其绑定到指定的本地地址。本地端口必须在 0 到 65535 之间（包括两者）。如果 IP 地址为 0.0.0.0，套接字将被绑定到通配符地址，IP 地址由内核选择。</li>
<li>public void close()关闭此数据报套接字。</li>
<li>public void send(DatagramPacket p)从此套接字发送数据报包。DatagramPacket 包含的信息指示：将要发送的数据、其长度、远程主机的IP 地址和远程主机的端口号。</li>
<li>public void receive(DatagramPacket p)从此套接字接收数据报包。当此方法返回时，DatagramPacket的缓冲区填充了接收的数据。数据报包也包含发送方的 IP 地址和发送方机器上的端口号。 此方法在接收到数据报前一直阻塞。数据报包对象的 length 字段包含所接收信息的长度。如果信息比包的长度长，该信息将被截短。</li>
<li>public InetAddress getLocalAddress()获取套接字绑定的本地地址。</li>
<li>public int getLocalPort()返回此套接字绑定的本地主机上的端口号。</li>
<li>public InetAddress getInetAddress()返回此套接字连接的地址。如果套接字未连接，则返回null。</li>
<li>public int getPort()返回此套接字的端口。如果套接字未连接，则返回-1。</li>
</ol>
<h2 id="5-3-DatagramPacket-类的常用方法"><a href="#5-3-DatagramPacket-类的常用方法" class="headerlink" title="5.3 DatagramPacket 类的常用方法"></a>5.3 DatagramPacket 类的常用方法</h2><ol>
<li>public DatagramPacket(byte[] buf,int length)构造 DatagramPacket，用来接收长度为 length 的数据包。 length 参数必须小于等于 buf.length。</li>
<li>public DatagramPacket(byte[] buf,int length,InetAddress address,int port)构造数据报包，用来将长度为 length 的包发送到指定主机上的指定端口号。length参数必须小于等于 buf.length。</li>
<li>public InetAddress getAddress()返回某台机器的 IP 地址，此数据报将要发往该机器或者是从该机器接收到的。</li>
<li>public int getPort()返回某台远程主机的端口号，此数据报将要发往该主机或者是从该主机接收到的。</li>
<li>public byte[] getData()返回数据缓冲区。接收到的或将要发送的数据从缓冲区中的偏移量 offset 处开始，持续 length 长度。</li>
<li>public int getLength()返回将要发送或接收到的数据的长度。</li>
</ol>
<h2 id="5-4-UDP网络通信流程"><a href="#5-4-UDP网络通信流程" class="headerlink" title="5.4 UDP网络通信流程"></a>5.4 UDP网络通信流程</h2><ul>
<li>流 程：<ol>
<li>创建DatagramSocket与DatagramPacket对象</li>
<li>建立发送端，接收端</li>
<li>建立数据包</li>
<li>调用Socket的发送、接收方法</li>
<li>关闭Socket</li>
</ol>
</li>
<li>发送端与接收端是两个独立的运行程序</li>
</ul>
<h2 id="5-5-一个例子"><a href="#5-5-一个例子" class="headerlink" title="5.5 一个例子"></a>5.5 一个例子</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Random_name.sgm.day10.src.com.atguigu.java1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UDPd协议的网络编程</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//发送端</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sender</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        DatagramSocket socket = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//创建数据报套接字 DatagramSocket</span></span><br><span class="line">            <span class="comment">//将其绑定到本地主机上的任何可用端口。</span></span><br><span class="line">            <span class="comment">// 套接字将被绑定到一个由内核选择的IP地址。</span></span><br><span class="line">            socket = <span class="keyword">new</span> DatagramSocket();</span><br><span class="line">            <span class="comment">//设置要发送的数据</span></span><br><span class="line">            String str = <span class="string">"我是UDP方式发送的数据"</span>;</span><br><span class="line">            <span class="keyword">byte</span>[] data = str.getBytes();</span><br><span class="line">            <span class="comment">//创建UDP数据报包DatagramPacket对象，在数据报包中包含了发送的数据、其长度，接收端的IP地址和端口号。</span></span><br><span class="line">            InetAddress inet = InetAddress.getLocalHost();</span><br><span class="line">            DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(data, <span class="number">0</span>, data.length, inet, <span class="number">9090</span>);</span><br><span class="line">            socket.send(packet);<span class="comment">//用数据报套接字的方法发送数据报给接收端</span></span><br><span class="line"></span><br><span class="line">            System.out.println(socket.getInetAddress());<span class="comment">//返回此套接字连接的地址。如果套接字未连接，则返回null。</span></span><br><span class="line">            System.out.println(socket.getPort());<span class="comment">//返回此套接字的端口。如果套接字未连接，则返回-1。</span></span><br><span class="line">            <span class="comment">//获取套接字绑定的本地地址,如果 IP 地址为 0.0.0.0，套接字将被绑定到通配符地址，IP 地址由内核选择。</span></span><br><span class="line">            System.out.println(socket.getLocalAddress());</span><br><span class="line">            System.out.println(socket.getLocalPort());<span class="comment">//返回此套接字绑定的本地主机上的端口号。</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            socket.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//接收端</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receiver</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        DatagramSocket socket = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//创建数据报套接字并将其绑定到本地主机上的指定端口</span></span><br><span class="line">            socket = <span class="keyword">new</span> DatagramSocket(<span class="number">9090</span>);</span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">100</span>];</span><br><span class="line">            <span class="comment">//用来接收长度为 buffer.length 的数据包</span></span><br><span class="line">            DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(buffer, <span class="number">0</span>, buffer.length);</span><br><span class="line">            <span class="comment">//从此套接字接收数据报包</span></span><br><span class="line">            socket.receive(packet);</span><br><span class="line">            <span class="comment">//打印接收到的数据报包中的信息</span></span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(packet.getData(), <span class="number">0</span>, packet.getLength()));</span><br><span class="line"></span><br><span class="line">            System.out.println(socket.getInetAddress());<span class="comment">//返回此套接字连接的地址。如果套接字未连接，则返回null。</span></span><br><span class="line">            System.out.println(socket.getPort());<span class="comment">//返回此套接字的端口。如果套接字未连接，则返回-1。</span></span><br><span class="line">            <span class="comment">//获取套接字绑定的本地地址,如果 IP 地址为 0.0.0.0，套接字将被绑定到通配符地址，IP 地址由内核选择。</span></span><br><span class="line">            System.out.println(socket.getLocalAddress());<span class="comment">//获取套接字绑定的本地地址</span></span><br><span class="line">            System.out.println(socket.getLocalPort());<span class="comment">//返回此套接字绑定的本地主机上的端口号。</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            socket.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//发送端：</span><br><span class="line">null</span><br><span class="line">-<span class="number">1</span></span><br><span class="line"><span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>/<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"><span class="number">55684</span></span><br><span class="line"></span><br><span class="line">//接收端：</span><br><span class="line">我是UDP方式发送的数据</span><br><span class="line">null</span><br><span class="line">-<span class="number">1</span></span><br><span class="line"><span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>/<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"><span class="number">9090</span></span><br></pre></td></tr></table></figure>

<h1 id="6-URL编程"><a href="#6-URL编程" class="headerlink" title="6. URL编程"></a>6. URL编程</h1><h2 id="6-1-URL类"><a href="#6-1-URL类" class="headerlink" title="6.1 URL类"></a>6.1 URL类</h2><ul>
<li><code>URL(Uniform Resource Locator)：统一资源定位符，它表示 Internet 上 某一资源的地址。</code></li>
<li>它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何定位这个资源。</li>
<li>通过 URL 我们可以访问 Internet 上的各种网络资源，比如最常见的 www，ftp站点。浏览器通过解析给定的 URL 可以在网络上查找相应的文件或其他资源。</li>
<li>URL的基本结构由5部分组成：<br><code>&lt; 传输协议&gt;://&lt; 主机名&gt;:&lt; 端口号&gt;/&lt; 文件名&gt;# 片段名? 参数列表</code><br>例如: <a href="http://192.168.1.100:8080/helloworld/index.jsp#a?username=shkstart&amp;password=123" target="_blank" rel="noopener">http://192.168.1.100:8080/helloworld/index.jsp#a?username=shkstart&amp;password=123</a><ul>
<li>#片段名：即锚点，例如看小说，直接定位到章节</li>
<li>参数列表格式：参数名=参数值&amp;参数名=参数值….</li>
</ul>
</li>
</ul>
<h2 id="6-2-URL类构造器"><a href="#6-2-URL类构造器" class="headerlink" title="6.2 URL类构造器"></a>6.2 URL类构造器</h2><ul>
<li>为了表示URL，java.net 中实现了类 URL。我们可以通过下面的构造器来初始化一个 URL 对象：<ul>
<li>public URL (String spec)：通过一个表示URL地址的字符串可以构造一个URL对象。<br>例如：URL url = new URL (“<a href="http://www" target="_blank" rel="noopener">http://www</a>. bithachi.cn/“);</li>
<li>public URL(URL context, String spec)：通过基 URL 和相对 URL 构造一个 URL 对象。<br>例如：URL downloadUrl = new URL(url, “download.html”)</li>
<li>public URL(String protocol, String host, String file);<br>例如：new URL(“https”,”<a href="http://www.bithachi.cn&quot;" target="_blank" rel="noopener">www.bithachi.cn&quot;</a>, “download. html”);</li>
<li>public URL(String protocol, String host, int port, String file);<br>例如: URL gamelan = new URL(“https”, “<a href="http://www.bithachi.cn&quot;" target="_blank" rel="noopener">www.bithachi.cn&quot;</a>, 80, “download.html”);</li>
</ul>
</li>
<li>URL类的构造器都声明抛出非运行时异常，必须要对这一异常进行处理，通常是用 try-catch 语句进行捕获。</li>
<li>一个URL对象生成后，其属性是不能被改变的，但可以通过它给定的方法来获取这些属性：<ol>
<li>public String getProtocol( ) 获取该URL的协议名</li>
<li>public String getHost( ) 获取该URL的主机名</li>
<li>public String getPort( ) 获取该URL的端口号</li>
<li>public String getPath( ) 获取该URL的文件路径</li>
<li>public String getFile( ) 获取该URL的文件名</li>
<li>public String getQuery( ) 获取该URL的查询名</li>
</ol>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span>  <span class="title">URLTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            URL url = <span class="keyword">new</span> URL(<span class="string">"https://www.bithachi.cn:666/abc/123.jpg?username=Tom"</span>);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"getProtocol() : "</span>+url.getProtocol());<span class="comment">//获取该URL的协议名</span></span><br><span class="line">            System.out.println(<span class="string">"getHost() : "</span>+url.getHost());<span class="comment">//获取该URL的主机名</span></span><br><span class="line">            System.out.println(<span class="string">"getPort() : "</span>+url.getPort());<span class="comment">//获取该URL的端口号</span></span><br><span class="line">            System.out.println(<span class="string">"getPath() : "</span>+url.getPath());<span class="comment">//获取该URL的文件路径</span></span><br><span class="line">            System.out.println(<span class="string">"getFile() : "</span>+url.getFile());<span class="comment">//获取该URL的文件名</span></span><br><span class="line">            System.out.println(<span class="string">"getQuery() : "</span>+url.getQuery());<span class="comment">//获取该URL的查询名</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getProtocol() : https</span><br><span class="line">getHost() : www.bithachi.cn</span><br><span class="line">getPort() : <span class="number">666</span></span><br><span class="line">getPath() : /abc/<span class="number">123</span>.jpg</span><br><span class="line">getFile() : /abc/<span class="number">123</span>.jpg?username=Tom</span><br><span class="line">getQuery() : username=Tom</span><br></pre></td></tr></table></figure>

<h2 id="6-2-针对HTTP-协议的URLConnection类"><a href="#6-2-针对HTTP-协议的URLConnection类" class="headerlink" title="6.2 针对HTTP 协议的URLConnection类"></a>6.2 针对HTTP 协议的URLConnection类</h2><ul>
<li>URL的方法 <code>openStream()</code>：能从网络上读取数据</li>
<li>若希望输出数据，例如向服务器端的 <code>CGI</code>（<code>公共网关接口-Common GatewayInterface</code>-的简称，是用户浏览器和服务器端的应用程序进行连接的接口）程序发送一些数据，则必须先与URL建立连接，然后才能对其进行读写，此时需要使用URLConnection 。</li>
<li><code>URLConnection</code>：表示到URL所引用的远程对象的连接。当与一个URL建立连接时，首先要在一个 URL 对象上通过方法 <code>openConnection()</code>生成对应的 URLConnection对象。如果连接过程失败，将产生<code>IOException.</code></li>
<li>URL netchinaren = new URL (“<a href="https://www.bithachi.cn/index.html&quot;">https://www.bithachi.cn/index.html&quot;</a>);</li>
<li>URLConnectonn u = netchinaren.openConnection( );</li>
<li>通过URLConnection对象获取的输入流和输出流，即可以与现有的CGI程序进行交互。<ol>
<li>public Object getContent( ) throws IOException</li>
<li>public int getContentLength( )</li>
<li>public String getContentType( )</li>
<li>public long getDate( )</li>
<li>public long getLastModified( )</li>
<li>public InputStream getInputStream( )throws IOException</li>
<li>public OutputSteram getOutputStream( )throws IOException</li>
</ol>
</li>
</ul>
<p><strong>举个例子：下载URL所指的文件到本地</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">URLTest1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        HttpURLConnection urlConnection = <span class="keyword">null</span>;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            URL url = <span class="keyword">new</span> URL(<span class="string">"http://localhost:8080/examples/123.jpg"</span>);</span><br><span class="line">            <span class="comment">//获取HttpURLConnection对象</span></span><br><span class="line">            urlConnection = (HttpURLConnection) url.openConnection();</span><br><span class="line">            <span class="comment">//获取连接</span></span><br><span class="line">            urlConnection.connect();</span><br><span class="line">            <span class="comment">//获取输入流</span></span><br><span class="line">            is = urlConnection.getInputStream();</span><br><span class="line">            <span class="comment">//将输入流中的数据保存到abc.jpg中</span></span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"../abc.jpg"</span>);</span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                fos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"下载完成"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            <span class="keyword">if</span>(is != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(fos != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fos.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(urlConnection != <span class="keyword">null</span>)&#123;</span><br><span class="line">                urlConnection.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-3-URI-、URL-和URN的区别"><a href="#6-3-URI-、URL-和URN的区别" class="headerlink" title="6.3 URI 、URL 和URN的区别"></a>6.3 URI 、URL 和URN的区别</h2><ul>
<li><p><code>URI，是uniform resource identifier，统一资源标识符，用来唯一的标识一个资源。</code></p>
</li>
<li><p>URL是uniform resource locator，统一资源定位符，它是一种具体的URI，即<code>URL可以用来标识一个资源，而且还指明了如何定位这个资源</code>。</p>
</li>
<li><p>URN，uniform resource name，统一资源命名，是通过名字来标识资源，比如mailto:<a href="mailto:java-net@java.sun.com">java-net@java.sun.com</a>。</p>
</li>
<li><p>也就是说，URI是以一种抽象的，高层次概念定义统一资源标识，而URL和URN则是具体的资源标识的方式。</p>
<p>URL和URN都是一种URI。</p>
</li>
<li><p>在Java的URI中，一个URI实例可以代表绝对的，也可以是相对的，只要它符合URI的语法规则。而URL类则不仅符合语义，还包含了定位该资源的信息，因此它不能是相对的。</p>
</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20200827132103.png" alt="image-20200827132102888"></p>
<h1 id="7-小结"><a href="#7-小结" class="headerlink" title="7. 小结"></a>7. 小结</h1><ul>
<li>位于网络中的计算机具有唯一的IP地址，这样不同的主机可以互相区分。</li>
<li><code>客户端-服务器/CS</code>是一种最常见的网络应用程序模型。服务器是一个为其客户端提供某种特定服务的硬件或软件。客户机是一个用户应用程序，用于访问某台服务器提供的服务。</li>
<li><code>端口号</code>是对一个服务的访问场所，它用于区分同一物理计算机上的多个服务。</li>
<li><code>套接字</code>用于连接客户端和服务器，客户端和服务器之间的每个通信会话使用一个不同的套接字。</li>
<li>TCP协议用于实现面向连接的会话。</li>
<li>Java 中有关网络方面的功能都定义在<code>java.net</code>程序包中。Java 用<code>InetAddress</code>对象表示 IP地址，该对象里有两个字段：<code>主机名(String) 和 IP 地址(int)。</code></li>
<li>类 <code>Socket</code> 和 <code>ServerSocket</code>实现了基于TCP协议的客户端－服务器程序。Socket是客户端和服务器之间的一个连接，连接创建的细节被隐藏了。这个连接提供了一个安全的数据传输通道，这是因为 TCP 协议可以解决数据在传送过程中的丢失、损坏、重复、乱序以及网络拥挤等问题，它保证数据可靠的传送。</li>
<li>类 <code>URL</code>和 <code>URLConnection</code>提供了最高级网络应用。URL 的网络资源的位置来同一表示Internet 上各种网络资源。通过URL对象可以创建当前应用程序和 URL 表示的网络资源之间的连接，这样当前程序就可以读取网络资源数据，或者把自己的数据传送到网络上去。</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">BitHachi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.bithachi.cn/posts/8bb450e2.html">https://www.bithachi.cn/posts/8bb450e2.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.bithachi.cn" target="_blank">BitHachi</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">网络编程</a></div><div class="post_share"></div></div><div class="post-reward"><button class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.png" alt="微信" onclick="window.open('/img/wechat.png')"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.png" alt="支付宝" onclick="window.open('/img/alipay.png')"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/dd50572c.html"><img class="next-cover" data-src="https://images.pexels.com/photos/2072599/pexels-photo-2072599.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">泛型的奥妙</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'NRvlHdgJSxUn4u8Q1sgVDnlP-gzGzoHsz',
  appKey: '5sa3oi8Nwmzfo8zdXrnvibI0',
  placeholder: '记得留下你的昵称和邮箱....可以快速收到回复',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(https://cdn.pixabay.com/photo/2017/02/20/18/03/cat-2083492__340.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By BitHachi</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my blog.</div><div class="icp"><a href="http://www.beian.gov.cn/" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>鄂ICP备20002680号</span></a></div></div><div class="container" id="jsi-flying-fish-container"></div><script src="js/fish.js"></script><style>@media only screen and (max-width: 767px){
#sidebar_search_box input[type=text]{width:calc(100%)}
}</style></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">简</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/third-party/click_heart.js"></script><script src="https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
  pangu.autoSpacingPage()
})</script><script src="/js/search/local-search.js"></script><script src="https://cdn.jsdelivr.net/gh/xiabo2/CDN@latest/fish.js"></script></body></html>