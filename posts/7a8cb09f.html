<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>jsp入门篇 | BitHachi</title><meta name="description" content="JSP 是 Servlet的扩展，其目的是简化建立和管理动态页面的工作。JSP 和 Servlet 在本质上是同一种技术，Servlet 是 JSP 的早期版本，JSP 是 Servlet 的另外一种表现形式。"><meta name="keywords" content="JSP"><meta name="author" content="BitHachi"><meta name="copyright" content="BitHachi"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.bithachi.cn/posts/7a8cb09f.html"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//ta.qq.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta name="baidu-site-verification" content="3VJlgEduPjcVcUAR"/><meta property="og:type" content="article"><meta property="og:title" content="jsp入门篇"><meta property="og:url" content="https://www.bithachi.cn/posts/7a8cb09f.html"><meta property="og:site_name" content="BitHachi"><meta property="og:description" content="JSP 是 Servlet的扩展，其目的是简化建立和管理动态页面的工作。JSP 和 Servlet 在本质上是同一种技术，Servlet 是 JSP 的早期版本，JSP 是 Servlet 的另外一种表现形式。"><meta property="og:image" content="https://cdn.pixabay.com/photo/2016/02/13/12/26/aurora-1197753__340.jpg"><meta property="article:published_time" content="2020-11-08T08:17:19.440Z"><meta property="article:modified_time" content="2020-11-08T15:11:27.854Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = '2'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="prev" title="EL与JSTL" href="https://www.bithachi.cn/posts/387025f0.html"><link rel="next" title="会话管理：Session与Cookie" href="https://www.bithachi.cn/posts/f768f9d3.html"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8f5f31c25712dd1fb6414ae53fd6ecaf";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-171838759-1', 'auto');
ga('send', 'pageview');
</script><script src="https://tajs.qq.com/stats?sId=66572961" charset="UTF-8"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: BitHachi","link":"链接: ","source":"来源: BitHachi","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-center"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="baidu-site-verification" content="V1TxT1VCnF" /><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/bithachi.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">36</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">75</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">10</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-book"></i><span> 文章</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/books"><i class="fa-fw fa fa-bookmark"></i><span> 阅读</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/MessageBoard/"><i class="fa-fw fa fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-JSP简介"><span class="toc-text">1. JSP简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-JSP生命周期"><span class="toc-text">2. JSP生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-JSP编译"><span class="toc-text">2.1 JSP编译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-JSP初始化"><span class="toc-text">2.2 JSP初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-JSP执行"><span class="toc-text">2.3  JSP执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-JSP清理"><span class="toc-text">2.4 JSP清理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-生命周期简单案例"><span class="toc-text">2.5 生命周期简单案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-JSP-指令"><span class="toc-text">3. JSP 指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-page指令"><span class="toc-text">3.1 page指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-Include指令"><span class="toc-text">3.2 Include指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Taglib指令"><span class="toc-text">3.3  Taglib指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-JSP脚本"><span class="toc-text">4. JSP脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-JSP程序段（JSP-Scriplets）"><span class="toc-text">4.1  JSP程序段（JSP Scriplets）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-JSP表达式"><span class="toc-text">4.2 JSP表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-JSP声明"><span class="toc-text">4.3 JSP声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-JSP-注释"><span class="toc-text">4.4 JSP 注释</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-JSP-动作元素"><span class="toc-text">5. JSP 动作元素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-常见的属性"><span class="toc-text">5.1 常见的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-简单案例"><span class="toc-text">5.2 简单案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-jsp-include动作元素"><span class="toc-text">5.2.1 jsp:include动作元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-jsp-useBean动作元素"><span class="toc-text">5.2.2 jsp:useBean动作元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-3-jsp-setProperty动作元素"><span class="toc-text">5.2.3 jsp:setProperty动作元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-jsp-getProperty动作元素"><span class="toc-text">5.2.4 jsp:getProperty动作元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-5-jsp-forward-动作元素"><span class="toc-text">5.2.5 jsp:forward 动作元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-6-jsp-plugin动作元素"><span class="toc-text">5.2.6 jsp:plugin动作元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-7-jsp-element-、-jsp-attribute、-jsp-body动作元素"><span class="toc-text">5.2.7 jsp:element 、 jsp:attribute、 jsp:body动作元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-8-jsp-text动作元素"><span class="toc-text">5.2.8 jsp:text动作元素</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-JSP-隐式对象"><span class="toc-text">6. JSP 隐式对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-request对象"><span class="toc-text">6.1 request对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-response对象"><span class="toc-text">6.2 response对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-out对象"><span class="toc-text">6.3 out对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-session对象"><span class="toc-text">6.4 session对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-application对象"><span class="toc-text">6.5 application对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-config对象"><span class="toc-text">6.6 config对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-pageContext-对象"><span class="toc-text">6.7 pageContext 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-page-对象"><span class="toc-text">6.8 page 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-9-exception-对象"><span class="toc-text">6.9 exception 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-10-综合示例（一个猜数字的小游戏）"><span class="toc-text">6.10 综合示例（一个猜数字的小游戏）</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.pixabay.com/photo/2016/02/13/12/26/aurora-1197753__340.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">BitHachi</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-book"></i><span> 文章</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/books"><i class="fa-fw fa fa-bookmark"></i><span> 阅读</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/MessageBoard/"><i class="fa-fw fa fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">jsp入门篇</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-11-08 16:17:19 16:17:19"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-11-08 16:17:19</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-11-08 23:11:27 23:11:27"><i class="fas fa-history fa-fw"></i> 更新于 2020-11-08 23:11:27</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right post-meta__separator"></i><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/Java/JSP/">JSP</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">7.8k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 30 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="far fa-comments fa-fw post-meta__icon"></i><span>评论数:</span><a href="/posts/7a8cb09f.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/posts/7a8cb09f.html" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="1-JSP简介"><a href="#1-JSP简介" class="headerlink" title="1. JSP简介"></a>1. JSP简介</h2><p>JSP 是 Servlet的扩展，其目的是简化建立和管理动态页面的工作。JSP 和 Servlet 在本质上是同一种技术，Servlet 是 JSP 的早期版本，JSP 是 Servlet 的另外一种表现形式。</p>
<p>JSP（Java Server Pages），是一种<code>动态页面开发技术</code>，其根本是一个<code>简化的 Servlet 设计</code>，它是由 Sun 公司倡导（ Sun 公司已被甲骨文收购）、许多公司参与一起建立的一种动态网页技术标准。<code>JSP 技术是在传统的网页 HTML 文件中插入 Java 程序段（ Scriptlet ）和 JSP 标记（tag），从而形成 JSP 文件。</code></p>
<p>JSP 的主要目的是将表示逻辑从 Servlet 中分离出来。<code>Java Servlet 是 JSP 的技术基础</code>，而且大型的 Web 应用程序的开发需要Java Servlet 和 JSP 配合才能完成。用 JSP 开发的 Web 应用是跨平台的，既能在Linux下运行，也能在其他操作系统上运行。</p>
<h2 id="2-JSP生命周期"><a href="#2-JSP生命周期" class="headerlink" title="2. JSP生命周期"></a>2. JSP生命周期</h2><p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108162915.png" alt="image-20201108162915852"></p>
<p>JSP生命周期就是从创建到销毁的整个过程，类似于servlet生命周期，区别在于JSP生命周期还包括将JSP文件编译成servlet。</p>
<p>以下是JSP生命周期中所走过的几个阶段：</p>
<ul>
<li><p><strong>编译阶段：</strong></p>
<p>servlet容器编译servlet源文件，生成servlet类</p>
</li>
<li><p><strong>初始化阶段：</strong></p>
<p>加载与JSP对应的servlet类，创建其实例，并调用它的初始化方法</p>
</li>
<li><p><strong>执行阶段：</strong></p>
<p>调用与JSP对应的servlet实例的服务方法</p>
</li>
<li><p><strong>销毁阶段：</strong></p>
<p>调用与JSP对应的servlet实例的销毁方法，然后销毁servlet实例</p>
</li>
</ul>
<p>很明显，JSP生命周期的四个主要阶段和servlet生命周期非常相似，下面给出图示：</p>
<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108163029.png" alt="image-20201108163029221"></p>
<h3 id="2-1-JSP编译"><a href="#2-1-JSP编译" class="headerlink" title="2.1 JSP编译"></a>2.1 JSP编译</h3><p>当浏览器请求JSP页面时，JSP引擎会首先去检查是否需要编译这个文件。如果这个文件没有被编译过，或者在上次编译后被更改过，则编译这个JSP文件。</p>
<p>编译的过程包括三个步骤：</p>
<ul>
<li>解析JSP文件。</li>
<li>将JSP文件转为servlet。</li>
<li>编译servlet。</li>
</ul>
<h3 id="2-2-JSP初始化"><a href="#2-2-JSP初始化" class="headerlink" title="2.2 JSP初始化"></a>2.2 JSP初始化</h3><p>容器载入JSP文件后，它会在为请求提供任何服务前调用jspInit()方法。如果您需要执行自定义的JSP初始化任务，复写jspInit()方法就行了，就像下面这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by FernFlower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> javax.servlet.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.Servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">JspPage</span> <span class="keyword">extends</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">jspInit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">jspDestroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一般来讲程序只初始化一次，servlet也是如此。通常情况下您可以在jspInit()方法中初始化数据库连接、打开文件和创建查询表。</p>
<h3 id="2-3-JSP执行"><a href="#2-3-JSP执行" class="headerlink" title="2.3  JSP执行"></a>2.3  JSP执行</h3><p>这一阶段描述了JSP生命周期中一切与请求相关的交互行为，直到被销毁。</p>
<p>当JSP网页完成初始化后，JSP引擎将会调用_jspService()方法。</p>
<p>_jspService()方法需要一个HttpServletRequest对象和一个HttpServletResponse对象作为它的参数，就像下面这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by FernFlower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> javax.servlet.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HttpJspPage</span> <span class="keyword">extends</span> <span class="title">JspPage</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">_jspService</span><span class="params">(HttpServletRequest var1, HttpServletResponse var2)</span> <span class="keyword">throws</span> ServletException, IOException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>_jspService()方法在每个request中被调用一次并且负责产生与之相对应的response，并且它还负责产生所有7个HTTP方法的回应，比如GET、POST、DELETE等等。</p>
<h3 id="2-4-JSP清理"><a href="#2-4-JSP清理" class="headerlink" title="2.4 JSP清理"></a>2.4 JSP清理</h3><p>JSP生命周期的销毁阶段描述了当一个JSP网页从容器中被移除时所发生的一切。</p>
<p>jspDestroy()方法在JSP中等价于servlet中的销毁方法。当您需要执行任何清理工作时复写jspDestroy()方法，比如释放数据库连接或者关闭文件夹等等。</p>
<p>jspDestroy()方法的格式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by FernFlower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> javax.servlet.jsp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.Servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">JspPage</span> <span class="keyword">extends</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">jspInit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">jspDestroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-生命周期简单案例"><a href="#2-5-生命周期简单案例" class="headerlink" title="2.5 生命周期简单案例"></a>2.5 生命周期简单案例</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;life.jsp&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%!</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> initVar=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> serviceVar=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> destroyVar=<span class="number">0</span>;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%!</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspInit</span><span class="params">()</span></span>&#123;</span><br><span class="line">        initVar++;</span><br><span class="line">        System.out.println(<span class="string">"jspInit(): JSP被初始化了"</span>+initVar+<span class="string">"次"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspDestroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        destroyVar++;</span><br><span class="line">        System.out.println(<span class="string">"jspDestroy(): JSP被销毁了"</span>+destroyVar+<span class="string">"次"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    serviceVar++;</span><br><span class="line">    System.out.println(<span class="string">"_jspService(): JSP共响应了"</span>+serviceVar+<span class="string">"次请求"</span>);</span><br><span class="line"></span><br><span class="line">    String content1=<span class="string">"初始化次数 : "</span>+initVar;</span><br><span class="line">    String content2=<span class="string">"响应客户请求次数 : "</span>+serviceVar;</span><br><span class="line">    String content3=<span class="string">"销毁次数 : "</span>+destroyVar;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h1&gt;JSP 测试实例&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;&lt;%=content1 %&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;%=content2 %&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;%=content3 %&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108164048.png" alt="image-20201108164048215"></p>
<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108164231.png" alt="image-20201108164231293"></p>
<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108164302.png" alt="image-20201108164302057"></p>
<h2 id="3-JSP-指令"><a href="#3-JSP-指令" class="headerlink" title="3. JSP 指令"></a>3. JSP 指令</h2><p><code>JSP 指令用来设置整个 JSP 页面相关的属性，如网页的编码方式和脚本语言。</code></p>
<p>JSP指令是被服务器解释并执行的，不会产生任何内容输出到网页中。也就是说，指令标识对于客户端浏览器是不可见的。<br>语法格式如下：<code>&lt;%@  指令名 attribute1=&quot;value1&quot;  attribute2=&quot;value2&quot;……%&gt;</code></p>
<p>指令可以有很多个属性，它们以键值对的形式存在，并用逗号隔开。例如：<br><code>&lt;%@ page language=“java&quot;  contentType=&quot;text/html; charset=UTF-8&quot;   pageEncoding=&quot;UTF-8&quot; %&gt;</code></p>
<p><code>指令名：用于指定指令名称，在JSP中包含page、include和taglib 3条指令。</code></p>
<p><code>属性：在一个指令中，可以设置多个属性。</code></p>
<p> JSP中的三种指令标签：</p>
<table>
<thead>
<tr>
<th align="left"><strong>指令</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">&lt;%@ page … %&gt;</td>
<td align="left">定义网页依赖属性，比如脚本语言、error页面、缓存需求等等</td>
</tr>
<tr>
<td align="left">&lt;%@ include … %&gt;</td>
<td align="left">包含其他文件</td>
</tr>
<tr>
<td align="left">&lt;%@ taglib … %&gt;</td>
<td align="left">引入标签库的定义</td>
</tr>
</tbody></table>
<h3 id="3-1-page指令"><a href="#3-1-page指令" class="headerlink" title="3.1 page指令"></a>3.1 page指令</h3><p>下表列出与Page指令相关的属性：</p>
<table>
<thead>
<tr>
<th align="left"><strong>属性</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">buffer</td>
<td align="left">指定out对象使用缓冲区的大小</td>
</tr>
<tr>
<td align="left">autoFlush</td>
<td align="left">控制out对象的 缓存区</td>
</tr>
<tr>
<td align="left">contentType</td>
<td align="left">指定当前JSP页面的MIME类型和字符编码</td>
</tr>
<tr>
<td align="left">errorPage</td>
<td align="left">指定当JSP页面发生异常时需要转向的错误处理页面</td>
</tr>
<tr>
<td align="left">isErrorPage</td>
<td align="left">指定当前页面是否可以作为另一个JSP页面的错误处理页面</td>
</tr>
<tr>
<td align="left">extends</td>
<td align="left">指定servlet从哪一个类继承</td>
</tr>
<tr>
<td align="left">import</td>
<td align="left">导入要使用的Java类</td>
</tr>
<tr>
<td align="left">info</td>
<td align="left">定义JSP页面的描述信息</td>
</tr>
<tr>
<td align="left">isThreadSafe</td>
<td align="left">指定对JSP页面的访问是否为线程安全</td>
</tr>
<tr>
<td align="left">language</td>
<td align="left">定义JSP页面所用的脚本语言，默认是Java</td>
</tr>
<tr>
<td align="left">session</td>
<td align="left">指定JSP页面是否使用session</td>
</tr>
<tr>
<td align="left">isELIgnored</td>
<td align="left">指定是否执行EL表达式</td>
</tr>
<tr>
<td align="left">isScriptingEnabled</td>
<td align="left">确定脚本元素能否被使用</td>
</tr>
</tbody></table>
<h3 id="3-2-Include指令"><a href="#3-2-Include指令" class="headerlink" title="3.2 Include指令"></a>3.2 Include指令</h3><p>JSP可以通过include指令来包含其他文件。被包含的文件可以是JSP文件、HTML文件或文本文件。包含的文件就好像是该JSP文件的一部分，会被同时编译执行。</p>
<p>Include指令的语法格式如下：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include file=<span class="string">"文件相对 url 地址"</span> %&gt;</span><br></pre></td></tr></table></figure>

<p><strong>include</strong> 指令中的文件名实际上是一个相对的 URL 地址。</p>
<p>如果您没有给文件关联一个路径，JSP编译器默认在当前路径下寻找。</p>
<p>等价的XML语法：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:directive.include</span> <span class="attr">file</span>=<span class="string">"文件相对 url 地址"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-Taglib指令"><a href="#3-3-Taglib指令" class="headerlink" title="3.3  Taglib指令"></a>3.3  Taglib指令</h3><p>JSP API允许用户自定义标签，一个自定义标签库就是自定义标签的集合。</p>
<p>Taglib指令引入一个自定义标签集合的定义，包括库路径、自定义标签。</p>
<p>Taglib指令的语法：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib uri=<span class="string">"uri"</span> prefix=<span class="string">"prefixOfTag"</span> %&gt;</span><br></pre></td></tr></table></figure>

<p>uri属性确定标签库的位置，prefix属性指定标签库的前缀。</p>
<p>等价的XML语法：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:directive.taglib</span> <span class="attr">uri</span>=<span class="string">"uri"</span> <span class="attr">prefix</span>=<span class="string">"prefixOfTag"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-JSP脚本"><a href="#4-JSP脚本" class="headerlink" title="4. JSP脚本"></a>4. JSP脚本</h2><p>JSP脚本元素是指嵌套在&lt;%和%&gt;之中的一条或多条Java程序代码。<br>JSP脚本元素可以将Java代码嵌入到HTML页面中。<br>JSP脚本元素主要包含如下3种类型：<code>JSP程序段（JSP Scriplets）、JSP表达式和JSP声明。</code></p>
<h3 id="4-1-JSP程序段（JSP-Scriplets）"><a href="#4-1-JSP程序段（JSP-Scriplets）" class="headerlink" title="4.1  JSP程序段（JSP Scriplets）"></a>4.1  JSP程序段（JSP Scriplets）</h3><p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108165330.png" alt="image-20201108165330178"></p>
<h3 id="4-2-JSP表达式"><a href="#4-2-JSP表达式" class="headerlink" title="4.2 JSP表达式"></a>4.2 JSP表达式</h3><p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108165401.png" alt="image-20201108165401448"></p>
<h3 id="4-3-JSP声明"><a href="#4-3-JSP声明" class="headerlink" title="4.3 JSP声明"></a>4.3 JSP声明</h3><p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108165421.png" alt="image-20201108165421707"></p>
<h3 id="4-4-JSP-注释"><a href="#4-4-JSP-注释" class="headerlink" title="4.4 JSP 注释"></a>4.4 JSP 注释</h3><p>JSP注释的语法格式为：<code>&lt;%-- 注释信息 --%&gt;</code><br>服务器在将JSP页面编译成Servlet程序时，会忽略JSP页面中被注释的内容，不会将注释信息发送到客户端。</p>
<h2 id="5-JSP-动作元素"><a href="#5-JSP-动作元素" class="headerlink" title="5. JSP 动作元素"></a>5. JSP 动作元素</h2><p>JSP 标准动作（Standard Action）元素是 <code>JSP 规范所定义的一种XML标签，用来运行特定动作</code>。<br>使用JSP标准动作元素的优点是：<code>可以减少JSP所包含的Java程序代码。</code></p>
<p>动作元素基本上都是预定义的函数，JSP规范定义了一系列的标准动作，它用JSP作为前缀，可用的标准动作元素如下：</p>
<table>
<thead>
<tr>
<th align="left">语法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">jsp:include</td>
<td align="left">在页面被请求的时候引入一个文件。</td>
</tr>
<tr>
<td align="left">jsp:useBean</td>
<td align="left">寻找或者实例化一个JavaBean。</td>
</tr>
<tr>
<td align="left">jsp:setProperty</td>
<td align="left">设置JavaBean的属性。</td>
</tr>
<tr>
<td align="left">jsp:getProperty</td>
<td align="left">输出某个JavaBean的属性。</td>
</tr>
<tr>
<td align="left">jsp:forward</td>
<td align="left">把请求转到一个新的页面。</td>
</tr>
<tr>
<td align="left">jsp:plugin</td>
<td align="left">根据浏览器类型为Java插件生成OBJECT或EMBED标记。</td>
</tr>
<tr>
<td align="left">jsp:element</td>
<td align="left">定义动态XML元素</td>
</tr>
<tr>
<td align="left">jsp:attribute</td>
<td align="left">设置动态定义的XML元素属性。</td>
</tr>
<tr>
<td align="left">jsp:body</td>
<td align="left">设置动态定义的XML元素内容。</td>
</tr>
<tr>
<td align="left">jsp:text</td>
<td align="left">在JSP页面和文档中使用写入文本的模板</td>
</tr>
</tbody></table>
<h3 id="5-1-常见的属性"><a href="#5-1-常见的属性" class="headerlink" title="5.1 常见的属性"></a>5.1 常见的属性</h3><p>所有的动作要素都有两个属性：id属性和scope属性。</p>
<ul>
<li><p><strong>id属性：</strong></p>
<p>id属性是动作元素的唯一标识，可以在JSP页面中引用。动作元素创建的id值可以通过PageContext来调用。</p>
</li>
</ul>
<ul>
<li><p><strong>scope属性：</strong></p>
<p>该属性用于识别动作元素的生命周期。 id属性和scope属性有直接关系，scope属性定义了相关联id对象的寿命。</p>
<p> scope属性有四个可能的值：<code>(a) page, (b)request, (c)session,  (d) application。</code></p>
</li>
</ul>
<h3 id="5-2-简单案例"><a href="#5-2-简单案例" class="headerlink" title="5.2 简单案例"></a>5.2 简单案例</h3><h4 id="5-2-1-jsp-include动作元素"><a href="#5-2-1-jsp-include动作元素" class="headerlink" title="5.2.1 jsp:include动作元素"></a>5.2.1 <a href="jsp:include">jsp:include</a>动作元素</h4><p><a href="jsp:include">jsp:include</a>动作元素用来包含静态和动态的文件。该动作把指定文件插入正在生成的页面。语法格式如下：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=<span class="string">"相对 URL 地址"</span> flush=<span class="string">"true"</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>　前面已经介绍过include指令，它是在JSP文件被转换成Servlet的时候引入文件，而这里的jsp:include动作不同，插入文件的时间是在页面被请求的时候。</p>
<p>以下是include动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">page</td>
<td align="left">包含在页面中的相对URL地址。</td>
</tr>
<tr>
<td align="left">flush</td>
<td align="left">布尔属性，定义在包含资源前是否刷新缓存区。</td>
</tr>
</tbody></table>
<p>  <strong>实例:</strong></p>
<p>以下我们定义了两个文件 <strong>date.jsp</strong> 和 <strong>main.jsp</strong>，代码如下所示：</p>
<p>date.jsp文件代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">   今天的日期是: &lt;%= (<span class="keyword">new</span> java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>main.jsp文件代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;WWW.bithachi.cn&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;include 动作实例&lt;/h2&gt;</span><br><span class="line">&lt;jsp:include page=<span class="string">"date.jsp"</span> flush=<span class="string">"true"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108171619.png" alt="image-20201108171619093"></p>
<h4 id="5-2-2-jsp-useBean动作元素"><a href="#5-2-2-jsp-useBean动作元素" class="headerlink" title="5.2.2 jsp:useBean动作元素"></a>5.2.2 <a href="jsp:useBean">jsp:useBean</a>动作元素</h4><p><strong>jsp:useBean</strong> 动作用来<code>加载一个将在JSP页面中使用的JavaBean</code>。</p>
<p>这个功能非常有用，因为它使得我们可以发挥 Java 组件复用的优势。</p>
<p>jsp:useBean动作最简单的语法为：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"name"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"package.class"</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>在类载入后，我们既可以通过 jsp:setProperty 和 jsp:getProperty 动作来修改和检索bean的属性。</p>
<p>以下是useBean动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">class</td>
<td align="left">指定Bean的完整包名。</td>
</tr>
<tr>
<td align="left">type</td>
<td align="left">指定将引用该对象变量的类型。</td>
</tr>
<tr>
<td align="left">beanName</td>
<td align="left">通过 java.beans.Beans 的 instantiate() 方法指定Bean的名字。</td>
</tr>
</tbody></table>
<p>在给出具体实例前，让我们先来看下 jsp:setProperty 和 jsp:getProperty 动作元素：    </p>
<h4 id="5-2-3-jsp-setProperty动作元素"><a href="#5-2-3-jsp-setProperty动作元素" class="headerlink" title="5.2.3 jsp:setProperty动作元素"></a>5.2.3 <a href="jsp:setProperty">jsp:setProperty</a>动作元素</h4><p>jsp:setProperty用来<code>设置已经实例化的Bean对象的属性</code>，有两种用法。首先，你可以在jsp:useBean元素的外面（后面）使用jsp:setProperty，如下所示：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"myName"</span> ... /&gt;</span><br><span class="line">...</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">"myName"</span> property=<span class="string">"someProperty"</span> .../&gt;</span><br></pre></td></tr></table></figure>

<p>此时，不管jsp:useBean是找到了一个现有的Bean，还是新创建了一个Bean实例，jsp:setProperty都会执行。第二种用法是把jsp:setProperty放入jsp:useBean元素的内部，如下所示：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"myName"</span> ... &gt;</span><br><span class="line">...</span><br><span class="line">   &lt;jsp:setProperty name=<span class="string">"myName"</span> property=<span class="string">"someProperty"</span> .../&gt;</span><br><span class="line">&lt;/jsp:useBean&gt;</span><br></pre></td></tr></table></figure>

<p>此时，jsp:setProperty只有在新建Bean实例时才会执行，如果是使用现有实例则不执行jsp:setProperty。</p>
<p>jsp:setProperty动作有下面四个属性,如下表：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">name</td>
<td align="left">name属性是必需的。它<code>表示要设置属性的是哪个Bean。</code></td>
</tr>
<tr>
<td align="left">property</td>
<td align="left">property属性是必需的。它表示要设置哪个属性。有一个特殊用法：如果property的值是<code>&quot;*&quot;</code>，表示所有名字和Bean属性名字匹配的请求参数都将被传递给相应的属性set方法。</td>
</tr>
<tr>
<td align="left">value</td>
<td align="left">value 属性是可选的。该属性用来指定Bean属性的值。字符串数据会在目标类中通过标准的valueOf方法自动转换成数字、boolean、Boolean、 byte、Byte、char、Character。例如，boolean和Boolean类型的属性值（比如”true”）通过 Boolean.valueOf转换，int和Integer类型的属性值（比如”42”）通过Integer.valueOf转换。 　　value和param不能同时使用，但可以使用其中任意一个。</td>
</tr>
<tr>
<td align="left">param</td>
<td align="left">param 是可选的。它指定用哪个请求参数作为Bean属性的值。如果当前请求没有参数，则什么事情也不做，系统不会把null传递给Bean属性的set方法。因此，你可以让Bean自己提供默认属性值，只有当请求参数明确指定了新值时才修改默认属性值。</td>
</tr>
</tbody></table>
<hr>
<h4 id="5-2-4-jsp-getProperty动作元素"><a href="#5-2-4-jsp-getProperty动作元素" class="headerlink" title="5.2.4 jsp:getProperty动作元素"></a>5.2.4 <a href="jsp:getProperty">jsp:getProperty</a>动作元素</h4><p>jsp:getProperty动作<code>提取指定Bean属性的值，转换成字符串，然后输出</code>。语法格式如下：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"myName"</span> ... /&gt;</span><br><span class="line">...</span><br><span class="line">&lt;jsp:getProperty name=<span class="string">"myName"</span> property=<span class="string">"someProperty"</span> .../&gt;</span><br></pre></td></tr></table></figure>

<p>下表是与getProperty相关联的属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">name</td>
<td align="left">要检索的Bean属性名称。Bean必须已定义。</td>
</tr>
<tr>
<td align="left">property</td>
<td align="left">表示要提取Bean属性的值</td>
</tr>
</tbody></table>
<p><strong>实例:</strong></p>
<p>以下实例我们使用了Bean:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBean</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String message = <span class="string">"菜鸟教程"</span>;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span>(message);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.message = message;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108172149.png" alt="image-20201108172149586"></p>
<p>下面是一个很简单的例子，它的功能是装载一个Bean，然后设置/读取它的message属性。</p>
<p>现在让我们在main.jsp文件中调用该Bean:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">         pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;www.bithachi.cn&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;Jsp 使用 JavaBean 实例&lt;/h2&gt;</span><br><span class="line">&lt;jsp:useBean id=<span class="string">"test"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"book.ch3.TestBean"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:setProperty name=<span class="string">"test"</span></span><br><span class="line">                 property=<span class="string">"message"</span></span><br><span class="line">                 value=<span class="string">"BitHachi..."</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;输出信息....&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:getProperty name=<span class="string">"test"</span> property=<span class="string">"message"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108172349.png" alt="image-20201108172349143"></p>
<h4 id="5-2-5-jsp-forward-动作元素"><a href="#5-2-5-jsp-forward-动作元素" class="headerlink" title="5.2.5 jsp:forward 动作元素"></a>5.2.5 <a href="jsp:forward">jsp:forward</a> 动作元素</h4><p>　jsp:forward动作<code>把请求转到另外的页面。</code>jsp:forward标记只有一个属性page。语法格式如下所示：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=<span class="string">"相对 URL 地址"</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>以下是forward相关联的属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">page</td>
<td align="left">page属性包含的是一个相对URL。page的值既可以直接给出，也可以在请求的时候动态计算，<code>可以是一个JSP页面或者一个 Java Servlet.</code></td>
</tr>
</tbody></table>
<p><strong>实例：</strong></p>
<p>以下实例我们使用了两个文件，分别是：<code>date.jsp 和 main.jsp。</code></p>
<p>date.jsp 文件代码如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">   今天的日期是: &lt;%= (<span class="keyword">new</span> java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>main.jsp文件代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;forward 动作实例&lt;/h2&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">"date.jsp"</span> /&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108172744.png" alt="image-20201108172744557"></p>
<h4 id="5-2-6-jsp-plugin动作元素"><a href="#5-2-6-jsp-plugin动作元素" class="headerlink" title="5.2.6 jsp:plugin动作元素"></a>5.2.6 <a href="jsp:plugin">jsp:plugin</a>动作元素</h4><p>jsp:plugin动作用来<code>根据浏览器的类型，插入通过Java插件 运行Java Applet所必需的OBJECT或EMBED元素。</code></p>
<p>如果需要的插件不存在，它会下载插件，然后执行Java组件。 Java组件可以是一个applet或一个JavaBean。</p>
<p>plugin动作有多个对应HTML元素的属性用于格式化Java 组件。param元素可用于向Applet 或 Bean 传递参数。</p>
<p>以下是使用plugin 动作元素的典型实例:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:plugin type=<span class="string">"applet"</span> codebase=<span class="string">"dirname"</span> code=<span class="string">"MyApplet.class"</span></span><br><span class="line">                           width=<span class="string">"60"</span> height=<span class="string">"80"</span>&gt;</span><br><span class="line">   &lt;jsp:param name=<span class="string">"fontcolor"</span> value=<span class="string">"red"</span> /&gt;</span><br><span class="line">   &lt;jsp:param name=<span class="string">"background"</span> value=<span class="string">"black"</span> /&gt;</span><br><span class="line"> </span><br><span class="line">   &lt;jsp:fallback&gt;</span><br><span class="line">      Unable to initialize Java Plugin</span><br><span class="line">   &lt;/jsp:fallback&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/jsp:plugin&gt;</span><br></pre></td></tr></table></figure>

<p>如果你有兴趣可以尝试使用applet来测试jsp:plugin动作元素，<fallback>元素是一个新元素，在组件出现故障的错误时发送给用户错误信息。</p>
<h4 id="5-2-7-jsp-element-、-jsp-attribute、-jsp-body动作元素"><a href="#5-2-7-jsp-element-、-jsp-attribute、-jsp-body动作元素" class="headerlink" title="5.2.7 jsp:element 、 jsp:attribute、 jsp:body动作元素"></a>5.2.7 <a href="jsp:element">jsp:element</a> 、 <a href="jsp:attribute">jsp:attribute</a>、 <a href="jsp:body">jsp:body</a>动作元素</h4><p><a href="jsp:element">jsp:element</a> 、 <a href="jsp:attribute">jsp:attribute</a>、 <a href="jsp:body">jsp:body</a>动作元素<code>动态定义XML元素</code>。动态是非常重要的，这就意味着XML元素在编译时是动态生成的而非静态。</p>
<p>以下实例动态定义了XML元素：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:element name=<span class="string">"xmlElement"</span>&gt;</span><br><span class="line">&lt;jsp:attribute name=<span class="string">"xmlElementAttr"</span>&gt;</span><br><span class="line">   属性值</span><br><span class="line">&lt;/jsp:attribute&gt;</span><br><span class="line">&lt;jsp:body&gt;</span><br><span class="line">   XML 元素的主体</span><br><span class="line">&lt;/jsp:body&gt;</span><br><span class="line">&lt;/jsp:element&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108173245.png" alt="image-20201108173245357"></p>
<h4 id="5-2-8-jsp-text动作元素"><a href="#5-2-8-jsp-text动作元素" class="headerlink" title="5.2.8 jsp:text动作元素"></a>5.2.8 <a href="jsp:text">jsp:text</a>动作元素</h4><p><a href="jsp:text">jsp:text</a>动作元素<code>允许在JSP页面和文档中使用写入文本的模板</code>，语法格式如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;模板数据&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>

<p>以上文本模板不能包含重复元素，只能包含文本和EL表达式（注：EL表达式将在后续章节中介绍）。请注意，在XML文件中，您不能使用表达式如 ${whatever &gt; 0}，因为&gt;符号是非法的。 你可以使用 ${whatever gt 0}表达式或者嵌入在一个CDATA部分的值。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;&lt;![CDATA[&lt;br&gt;]]&gt;&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>

<p>如果你需要在 XHTML 中声明 DOCTYPE,必须使用到<a href="jsp:text">jsp:text</a>动作元素，实例如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;&lt;![CDATA[&lt;!DOCTYPE html</span><br><span class="line">PUBLIC <span class="string">"-//W3C//DTD XHTML 1.0 Strict//EN"</span></span><br><span class="line"><span class="string">"DTD/xhtml1-strict.dtd"</span>&gt;]]&gt;</span><br><span class="line">&lt;/jsp:text&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;jsp:text action&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;books&gt;&lt;book&gt;&lt;jsp:text&gt;  </span><br><span class="line">    Welcome to JSP Programming</span><br><span class="line">&lt;/jsp:text&gt;&lt;/book&gt;&lt;/books&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>你可以对以上实例尝试使用<a href="jsp:text">jsp:text</a>及不使用该动作元素执行结果的区别。</p>
<h2 id="6-JSP-隐式对象"><a href="#6-JSP-隐式对象" class="headerlink" title="6. JSP 隐式对象"></a>6. JSP 隐式对象</h2><p>JSP隐式对象是JSP容器为每个页面提供的Java对象，开发者可以直接使用它们而不用显式声明。JSP隐式对象也被称为预定义变量。</p>
<p>JSP所支持的九大隐式对象：</p>
<table>
<thead>
<tr>
<th align="left"><strong>对象</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">request</td>
<td align="left"><strong>HttpServletRequest</strong> 接口的实例</td>
</tr>
<tr>
<td align="left">response</td>
<td align="left"><strong>HttpServletResponse</strong> 接口的实例</td>
</tr>
<tr>
<td align="left">out</td>
<td align="left"><strong>JspWriter</strong>类的实例，用于把结果输出至网页上</td>
</tr>
<tr>
<td align="left">session</td>
<td align="left"><strong>HttpSession</strong>类的实例</td>
</tr>
<tr>
<td align="left">application</td>
<td align="left"><strong>ServletContext</strong>类的实例，与应用上下文有关</td>
</tr>
<tr>
<td align="left">config</td>
<td align="left"><strong>ServletConfig</strong>类的实例</td>
</tr>
<tr>
<td align="left">pageContext</td>
<td align="left"><strong>PageContext</strong>类的实例，提供对JSP页面所有对象以及命名空间的访问</td>
</tr>
<tr>
<td align="left">page</td>
<td align="left">类似于Java类中的this关键字</td>
</tr>
<tr>
<td align="left">Exception</td>
<td align="left"><strong>Exception</strong>类的对象，代表发生错误的JSP页面中对应的异常对象</td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p>九大隐式对象举例：<a href="http://c.biancheng.net/view/1477.html" target="_blank" rel="noopener">http://c.biancheng.net/view/1477.html</a></p>
</blockquote>
<h3 id="6-1-request对象"><a href="#6-1-request对象" class="headerlink" title="6.1 request对象"></a>6.1 request对象</h3><p>request对象是javax.servlet.http.HttpServletRequest 类的实例。每当客户端请求一个JSP页面时，JSP引擎就会制造一个新的request对象来代表这个请求。</p>
<p>request对象提供了一系列方法来获取HTTP头信息，cookies，HTTP方法等等。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Object getAttribute(String name)</td>
<td>用于返回由 name 指定的属性值，如果指定的属性值不存在， 则返回一个 null 值</td>
</tr>
<tr>
<td>Enumeration getAttributeNames()</td>
<td>用于返回 request 对象的所有属性的名称集合</td>
</tr>
<tr>
<td>String getCharacterEncoding()</td>
<td>用于返回一个 String，它包含请求正文中所使用的字符编码</td>
</tr>
<tr>
<td>int getContentLength()</td>
<td>用于返回请求正文的长度（字节数），如果不确定，返回 -1</td>
</tr>
<tr>
<td>String getContenType()</td>
<td>得到请求体的 MIME 类型</td>
</tr>
<tr>
<td>ServletlnputStream getInputStream()</td>
<td>用于返回请求的输入流，用来显示请求中的数据</td>
</tr>
<tr>
<td>String getParameter(String name)</td>
<td>用于获取客户端传送给服务器端的参数。主要由 name 指定， 通常是表单中的参数</td>
</tr>
<tr>
<td>Enumeration getParameterNames()</td>
<td>用于获取客户端传送的所有参数的名字集合</td>
</tr>
<tr>
<td>String getParameterValues(String name)</td>
<td>用于获得指定参数的所有值，由 name 指定</td>
</tr>
<tr>
<td>String getProtocol()</td>
<td>用于返回客户端向服务器端传送数据所依据的协议名称</td>
</tr>
<tr>
<td>String getMethod()</td>
<td>用于获得客户端向服务器端传送数据的参数方法，主要有两个， 分别是 get() 和 post()</td>
</tr>
<tr>
<td>String getServerName()</td>
<td>用于获得服务器端的主机名字</td>
</tr>
<tr>
<td>int getServletPath()</td>
<td>用于获得 <a href="http://c.biancheng.net/jsp/" target="_blank" rel="noopener">JSP</a> 文件相对于根地址的地址</td>
</tr>
<tr>
<td>String getRemoteAddr()</td>
<td>用于获得客户端的网络地址</td>
</tr>
<tr>
<td>String getRemoteHost()</td>
<td>用于获取发送此请求的客户端主机名</td>
</tr>
<tr>
<td>String getRealPath(String path)</td>
<td>用于获取一虚拟路径的真实路径</td>
</tr>
<tr>
<td>cookie[] get Cookie()</td>
<td>用于获取所有的 Cookie 对象</td>
</tr>
<tr>
<td>void setAttribute(String key,Object obj)</td>
<td>设置属性的属性值</td>
</tr>
<tr>
<td>boolean isSecure()</td>
<td>返回布尔类型的值，用于确定这个请求是否使用了一个安全协 议，如 HTTP</td>
</tr>
<tr>
<td>boolean isRequestedSessionldPromCookie()</td>
<td>返回布尔类型的值，表示会话是否使用了一个 Cookie 来管理 会话 ID</td>
</tr>
<tr>
<td>boolean isRequestedSessionIdFromURL()</td>
<td>返回布尔类型的值，表示会话是否使用了一个URL来管理会话 ID</td>
</tr>
<tr>
<td>boolean isRequestedSessionldFromVoid()</td>
<td>检查请求的会话 ID 是否合法</td>
</tr>
</tbody></table>
<hr>
<h3 id="6-2-response对象"><a href="#6-2-response对象" class="headerlink" title="6.2 response对象"></a>6.2 response对象</h3><p>response对象是javax.servlet.http.HttpServletResponse类的实例。当服务器创建request对象时会同时创建用于响应这个客户端的response对象。</p>
<p>response对象也定义了处理HTTP头模块的接口。通过这个对象，开发者们可以添加新的cookies，时间戳，HTTP状态码等等。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>void addCookie(Cookie cookie)</td>
<td>添加 Cookie 的方法</td>
</tr>
<tr>
<td>void addHeader(String name,String value)</td>
<td>添加 HTTP 文件指定的头信息</td>
</tr>
<tr>
<td>String encodeURL(String url)</td>
<td>将 URL 予以编码，回传包含 Session ID 的 URL</td>
</tr>
<tr>
<td>void flushBuffer()</td>
<td>强制把当前缓冲区内容发送到客户端</td>
</tr>
<tr>
<td>int getBufferSize()</td>
<td>返回响应所使用的实际缓冲区大小，如果没使用缓冲区， 则该方法返回 0</td>
</tr>
<tr>
<td>void set BufferSize(int size)</td>
<td>为响应的主体设置首选的缓冲区大小</td>
</tr>
<tr>
<td>boolean isCommitted()</td>
<td>一个 boolean，表示响应是否已经提交；提交的响应已经 写入状态码和报头</td>
</tr>
<tr>
<td>void reset()</td>
<td>清除缓冲区存在的任何数据，并清除状态码和报头</td>
</tr>
<tr>
<td>ServletOutputStream getOutputStream()</td>
<td>返回到客户端的输出流对象</td>
</tr>
<tr>
<td>void sendError(int xc[,String msg])</td>
<td>向客户端发送错误信息</td>
</tr>
<tr>
<td>void sengRedirect(java.lang.String location)</td>
<td>把响应发送到另一个位置进行处理</td>
</tr>
<tr>
<td>void setCotentType(String type)</td>
<td>设置响应的 MIME 类型</td>
</tr>
<tr>
<td>void setHeader(String name,String value)</td>
<td>设置指定名字的 HTTP 文件头信息</td>
</tr>
<tr>
<td>void setCotentLength(int len)</td>
<td>设置响应头的长度</td>
</tr>
</tbody></table>
<hr>
<h3 id="6-3-out对象"><a href="#6-3-out对象" class="headerlink" title="6.3 out对象"></a>6.3 out对象</h3><p>out对象是 javax.servlet.jsp.JspWriter 类的实例，用来在response对象中写入内容。</p>
<p>最初的JspWriter类对象根据页面是否有缓存来进行不同的实例化操作。可以在page指令中使用buffered=’false’属性来轻松关闭缓存。</p>
<p>JspWriter类包含了大部分java.io.PrintWriter类中的方法。不过，JspWriter新增了一些专为处理缓存而设计的方法。还有就是，JspWriter类会抛出IOExceptions异常，而PrintWriter不会。</p>
<p>下表列出了我们将会用来输出boolean，char，int，double，String，object等类型数据的重要方法：</p>
<table>
<thead>
<tr>
<th align="left"><strong>方法</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>out.print(dataType dt)</strong></td>
<td align="left">输出Type类型的值</td>
</tr>
<tr>
<td align="left"><strong>out.println(dataType dt)</strong></td>
<td align="left">输出Type类型的值然后换行</td>
</tr>
<tr>
<td align="left"><strong>out.flush()</strong></td>
<td align="left">刷新输出流</td>
</tr>
</tbody></table>
<hr>
<h3 id="6-4-session对象"><a href="#6-4-session对象" class="headerlink" title="6.4 session对象"></a>6.4 session对象</h3><p>session对象是 javax.servlet.http.HttpSession 类的实例。和Java Servlets中的session对象有一样的行为。</p>
<p>session对象用来跟踪在各个客户端请求间的会话。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Object getAttribute(String name)</td>
<td>获取指定名字的属性</td>
</tr>
<tr>
<td>Enumeration getAttributeName()</td>
<td>获取 session 中全部属性的名字，一个枚举</td>
</tr>
<tr>
<td>long getCreationTime()</td>
<td>返回 session 的创建时间，单位：毫秒</td>
</tr>
<tr>
<td>public String getld()</td>
<td>返回创建 session 时 JSP 引擎为它设置的唯一 ID 号</td>
</tr>
<tr>
<td>long getLastAccessedTime()</td>
<td>返回此 session 中客户端最近一次请求的时间。由 1970-01-01 算起，单位是毫秒。使用这个方法，可以判断某个用户在站点上 一共停留了多长时间</td>
</tr>
<tr>
<td>int getMaxInactiveInterval()</td>
<td>返回两次请求间隔多长时间 session 被销毁(单位：秒）</td>
</tr>
<tr>
<td>void setMaxlnactivelnterval(int interval)</td>
<td>设置两次请求间隔多长时间 session 被销毁(单位：秒）</td>
</tr>
<tr>
<td>void invalidate()</td>
<td>销毁 session 对象</td>
</tr>
<tr>
<td>boolean isNew()</td>
<td>判断请求是否会产生新的 session 对象</td>
</tr>
<tr>
<td>void removeAttxibute(String name)</td>
<td>删除指定名字的属性</td>
</tr>
<tr>
<td>void setAttribute(String name,String value)</td>
<td>设定指定名字的属性值</td>
</tr>
</tbody></table>
<hr>
<h3 id="6-5-application对象"><a href="#6-5-application对象" class="headerlink" title="6.5 application对象"></a>6.5 application对象</h3><p>JSP application 对象用于保存应用程序的公用数据，服务器启动并自动创建 application 对象后，只要没有关闭服务器，application 对象就一直存在，所有用户共享 application 对象。</p>
<p>JSP application 对象是 javax.servlet.ServletContext 类的实例，这有助于查找有关 Servlet 引擎和 Servlet 环境的信息。它的生命周期从服务器启动到关闭。在此期间，对象将一直存在。这样，在用户的前后连接或不同用户之间的连接中，可以对此对象的同一属性进行操作。<code>在任何地方 对此对象属性的操作，都会影响到其他用户的访问。</code></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>getAttribute( String arg)</td>
<td>获取 application 对象中含有关键字的对象</td>
</tr>
<tr>
<td>getAttributeNames()</td>
<td>获取 application 对象的所有参数名字</td>
</tr>
<tr>
<td>getMajorVersion()</td>
<td>获取服务器支持 Servlet 的主版本号</td>
</tr>
<tr>
<td>getMinorVersion()</td>
<td>获取服务器支持 Servlet 的从版本号</td>
</tr>
<tr>
<td>removeAttribute(java.lang.String name)</td>
<td>根据名字删除 application 对象的参数</td>
</tr>
<tr>
<td>setAttribute(String key,Object obj)</td>
<td>将参数 Object 指定的对象 obj 添加到 application 对象中，并 为添加的对象指定一个索引关键字</td>
</tr>
</tbody></table>
<hr>
<h3 id="6-6-config对象"><a href="#6-6-config对象" class="headerlink" title="6.6 config对象"></a>6.6 config对象</h3><p>config对象是 javax.servlet.ServletConfig 类的实例，直接包装了servlet的ServletConfig类的对象。</p>
<p>这个对象允许开发者访问Servlet或者JSP引擎的初始化参数，比如文件路径等。</p>
<p>以下是config对象的使用方法，不是很重要，所以不常用：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.getServletName();</span><br></pre></td></tr></table></figure>

<p>它返回包含在<servlet-name>元素中的servlet名字，注意，<servlet-name>元素在 WEB-INF\web.xml 文件中定义。</p>
<p>方法说明ServletContext getServletContext()返回所执行的 Servlet 的环境对象String getServletName()返回所执行的 Servlet 的名字String getInitParameter(String name)返回指定名字的初始参数值Enumeration getlnitParameterName()返回该 JSP 中所有初始参数名，一个枚举</p>
<hr>
<h3 id="6-7-pageContext-对象"><a href="#6-7-pageContext-对象" class="headerlink" title="6.7 pageContext 对象"></a>6.7 pageContext 对象</h3><p>pageContext对象是javax.servlet.jsp.PageContext 类的实例，用来代表整个JSP页面。</p>
<p>这个对象主要用来访问页面信息，同时过滤掉大部分实现细节。</p>
<p>这个对象存储了request对象和response对象的引用。application对象，config对象，session对象，out对象可以通过访问这个对象的属性来导出。</p>
<p>pageContext对象也包含了传给JSP页面的指令信息，包括缓存信息，ErrorPage URL,页面scope等。</p>
<p>PageContext类定义了一些字段，包括PAGE_SCOPE，REQUEST_SCOPE，SESSION_SCOPE， APPLICATION_SCOPE。它也提供了40余种方法，有一半继承自javax.servlet.jsp.JspContext 类。</p>
<p>其中一个重要的方法就是 removeAttribute()，它可接受一个或两个参数。比如，pageContext.removeAttribute(“attrName”) 移除四个scope中相关属性，但是下面这种方法只移除特定 scope 中的相关属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pageContext.removeAttribute(&quot;attrName&quot;, PAGE_SCOPE);</span><br></pre></td></tr></table></figure>

<hr>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>void forward(String relativeUrlPath)</td>
<td>把页面转发到另一个页面或者 <a href="http://c.biancheng.net/servlet/" target="_blank" rel="noopener">Servlet</a> 组件上</td>
</tr>
<tr>
<td>Exception getException()</td>
<td>返回当前页的 Exception 对象</td>
</tr>
<tr>
<td>ServletRequest getRequest()</td>
<td>返回当前页的 request 对象</td>
</tr>
<tr>
<td>ServletResponse getResponse()</td>
<td>返回当前页的 response 对象</td>
</tr>
<tr>
<td>ServletConfig getServletConfig()</td>
<td>返回当前页的 ServletConfig 对象</td>
</tr>
<tr>
<td>HttpSession getSession()</td>
<td>返回当前页的 session 对象</td>
</tr>
<tr>
<td>Object getPage()</td>
<td>返回当前页的 page 对象</td>
</tr>
<tr>
<td>ServletContext getServletContext()</td>
<td>返回当前页的 <a href="http://c.biancheng.net/view/1465.html" target="_blank" rel="noopener">application 对象</a></td>
</tr>
<tr>
<td>public Object getAttribute(String name)</td>
<td>获取属性值</td>
</tr>
<tr>
<td>Object getAttribute(String name,int scope)</td>
<td>在指定的范围内获取属性值</td>
</tr>
<tr>
<td>void setAttribute(String name,Object attribute)</td>
<td>设置属性及属性值</td>
</tr>
<tr>
<td>void setAttribute(String name,Object obj,int scope)</td>
<td>在指定范围内设置属性及属性值</td>
</tr>
<tr>
<td>void removeAttribute(String name)</td>
<td>删除某属性</td>
</tr>
<tr>
<td>void removeAttribute(String name,int scope)</td>
<td>在指定范围内删除某属性</td>
</tr>
<tr>
<td>void invalidate()</td>
<td>返回 servletContext 对象，全部销毁</td>
</tr>
</tbody></table>
<h3 id="6-8-page-对象"><a href="#6-8-page-对象" class="headerlink" title="6.8 page 对象"></a>6.8 page 对象</h3><p>这个对象就是页面实例的引用。它可以被看做是整个JSP页面的代表。</p>
<p>page 对象就是this对象的同义词。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>class getClass()</td>
<td>返回当前 Object 的类</td>
</tr>
<tr>
<td>int hashCode</td>
<td>返回 Object 的 hash 代码</td>
</tr>
<tr>
<td>String toString</td>
<td>把 Object 对象转换成 String 类的对象</td>
</tr>
<tr>
<td>boolean equals(Object obj)</td>
<td>比较对象和指定的对象是否相等</td>
</tr>
<tr>
<td>void copy (Object obj)</td>
<td>把对象拷贝到指定的对象中</td>
</tr>
<tr>
<td>Object clone()</td>
<td>复制对象（克隆对象）</td>
</tr>
</tbody></table>
<hr>
<h3 id="6-9-exception-对象"><a href="#6-9-exception-对象" class="headerlink" title="6.9 exception 对象"></a>6.9 exception 对象</h3><p>exception 对象包装了从先前页面中抛出的异常信息。它通常被用来产生对出错条件的适当响应。</p>
<h3 id="6-10-综合示例（一个猜数字的小游戏）"><a href="#6-10-综合示例（一个猜数字的小游戏）" class="headerlink" title="6.10 综合示例（一个猜数字的小游戏）"></a>6.10 综合示例（一个猜数字的小游戏）</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"book.ch3.NumberGuessBean"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;%--`加载一个将在JSP页面中使用的JavaBean`--%&gt;</span><br><span class="line">&lt;jsp:useBean id=<span class="string">"numguess"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"book.ch3.NumberGuessBean"</span> scope=<span class="string">"session"</span> /&gt;</span><br><span class="line">&lt;%--`设置已经实例化的Bean对象的属性`--%&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">"numguess"</span> property=<span class="string">"*"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;猜数小游戏&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;font size=<span class="number">4</span>&gt;</span><br><span class="line">&lt;%--如果成功猜中--%&gt;</span><br><span class="line">    &lt;% <span class="keyword">if</span> (numguess.getSuccess()) &#123; %&gt;</span><br><span class="line">         Congratulations! You got it. And after just &lt;%=numguess.getNumGuesses()%&gt; tries.</span><br><span class="line">         &lt;p&gt; &lt;%numguess.reset();%&gt;</span><br><span class="line">         Care to &lt;a href="numguess.jsp"&gt;try again&lt;/a&gt;</span><br><span class="line">&lt;%--如果没猜中，且是第一次玩--%&gt;</span><br><span class="line">    &lt;% &#125; <span class="keyword">else</span> <span class="keyword">if</span> (numguess.getNumGuesses() == <span class="number">0</span>) &#123; %&gt;</span><br><span class="line">             Welcome to the Number Guess game.</span><br><span class="line">            &lt;p&gt;I<span class="string">'m thinking of a number between 1 and 100. &lt;p&gt;</span></span><br><span class="line"><span class="string">            &lt;form method=get&gt;</span></span><br><span class="line"><span class="string">                What'</span>s your guess?</span><br><span class="line">                &lt;input type=text name=guess&gt;</span><br><span class="line">                &lt;input type=submit value=<span class="string">"Submit"</span>&gt;</span><br><span class="line">            &lt;/form&gt;</span><br><span class="line">&lt;%--没猜中，已经有一次猜数，则提示范围--%&gt;</span><br><span class="line">    &lt;% &#125; <span class="keyword">else</span> &#123;%&gt;</span><br><span class="line">            Good guess, but nope. Try &lt;b&gt;&lt;%=numguess.getHint()%&gt;&lt;/b&gt;.</span><br><span class="line">            You have made &lt;%=numguess.getNumGuesses()%&gt; guesses.</span><br><span class="line">            &lt;p&gt;I<span class="string">'m thinking of a number between 1 and 100. &lt;p&gt;</span></span><br><span class="line"><span class="string">            &lt;form method=get&gt;</span></span><br><span class="line"><span class="string">                What'</span>s your guess?</span><br><span class="line">                &lt;input type=text name=guess&gt;</span><br><span class="line">                &lt;input type=submit value=<span class="string">"Submit"</span>&gt;</span><br><span class="line">            &lt;/form&gt;</span><br><span class="line">        &lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;/font&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> book.ch3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NumberGuessBean</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> answer;</span><br><span class="line">    <span class="keyword">private</span> String hint;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> numGuesses;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> success;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Random random = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NumberGuessBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        reset();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAnswer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAnswer</span><span class="params">(<span class="keyword">int</span> answer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.answer = answer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span> + hint;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHint</span><span class="params">(String hint)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hint = hint;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNumGuesses</span><span class="params">(<span class="keyword">int</span> numGuesses)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.numGuesses = numGuesses;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNumGuesses</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> numGuesses;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">getSuccess</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> success;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuccess</span><span class="params">(<span class="keyword">boolean</span> success)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.success = success;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGuess</span><span class="params">(String guess)</span> </span>&#123;</span><br><span class="line">        numGuesses++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> g;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            g = Integer.parseInt(guess);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">            g = -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (g == answer) &#123;</span><br><span class="line">            success = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (g == -<span class="number">1</span>) &#123;</span><br><span class="line">            hint = <span class="string">"a number next time"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (g &lt; answer) &#123;</span><br><span class="line">            hint = <span class="string">"higher"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (g &gt; answer) &#123;</span><br><span class="line">            hint = <span class="string">"lower"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reset</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        answer = Math.abs(random.nextInt() % <span class="number">100</span>) + <span class="number">1</span>;</span><br><span class="line">        success = <span class="keyword">false</span>;</span><br><span class="line">        numGuesses = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108180929.png" alt="image-20201108180929898"></p>
<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108181134.png" alt="image-20201108181134542"></p>
<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108181228.png" alt="image-20201108181228166"></p>
<p><img src= "/img/loading.gif" data-src="https://image.bithachi.cn/20201108181235.png" alt="image-20201108181235093"></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">BitHachi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.bithachi.cn/posts/7a8cb09f.html">https://www.bithachi.cn/posts/7a8cb09f.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.bithachi.cn" target="_blank">BitHachi</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JSP/">JSP</a></div><div class="post_share"></div></div><div class="post-reward"><button class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.png" alt="微信" onclick="window.open('/img/wechat.png')"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.png" alt="支付宝" onclick="window.open('/img/alipay.png')"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/387025f0.html"><img class="prev-cover" data-src="https://cdn.pixabay.com/photo/2020/03/21/07/58/cat-4952949__340.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">EL与JSTL</div></div></a></div><div class="next-post pull-right"><a href="/posts/f768f9d3.html"><img class="next-cover" data-src="https://cdn.pixabay.com/photo/2020/07/08/05/31/gray-cat-5382617__340.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">会话管理：Session与Cookie</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/posts/387025f0.html" title="EL与JSTL"><img class="relatedPosts_cover" data-src="https://cdn.pixabay.com/photo/2020/03/21/07/58/cat-4952949__340.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-08 18:59:12</div><div class="relatedPosts_title">EL与JSTL</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'NRvlHdgJSxUn4u8Q1sgVDnlP-gzGzoHsz',
  appKey: '5sa3oi8Nwmzfo8zdXrnvibI0',
  placeholder: '记得留下你的昵称和邮箱....可以快速收到回复',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(https://cdn.pixabay.com/photo/2016/02/13/12/26/aurora-1197753__340.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By BitHachi</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my blog.</div><div class="icp"><a href="http://www.beian.gov.cn/" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>鄂ICP备20002680号</span></a></div></div><div class="container" id="jsi-flying-fish-container"></div><script src="js/fish.js"></script><style>@media only screen and (max-width: 767px){
#sidebar_search_box input[type=text]{width:calc(100%)}
}</style></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">简</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/third-party/click_heart.js"></script><script src="https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
  pangu.autoSpacingPage()
})</script><script src="/js/search/local-search.js"></script><script src="https://cdn.jsdelivr.net/gh/xiabo2/CDN@latest/fish.js"></script></body></html>